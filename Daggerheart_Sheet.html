<!-- HEADER/BASIC INFORMATION -->
<div class="header-container">
    <div class="header-name-label">
        <span>Name:</span>
    </div>
    <div class="header-name-input">
        <input type="text" name="attr_character_name">
    </div>
    <div class="header-player-label">
        <span>Player:</span>
    </div>        
    <div class="header-player-input">
        <input type="text" name="attr_player_name">
    </div>

        <div class="header-ancestry-label">
        <span>Ancestry:</span>
    </div>
    <div class="header-ancestry-input">
        <select name="attr_ancestry">
            <option value="custom" selected="true"></option>
            <option value="clank">Clank</option>
            <option value="drakona">Drakona</option>
            <option value="dwarf">Dwarf</option>
            <option value="elf">Elf</option>
            <option value="faerie">Faerie</option>
            <option value="faun">Faun</option>
            <option value="firbolg">Firbolg</option>
            <option value="fungril">Fungril</option>
            <option value="galapa">Galapa</option>
            <option value="giant">Giant</option>
            <option value="goblin">Goblin</option>
            <option value="halfling">Halfling</option>
            <option value="human">Human</option>
            <option value="infernis">Infernis</option>
            <option value="katari">Katari</option>
            <option value="orc">Orc</option>
            <option value="ribbet">Ribbet</option>
            <option value="simiah">Simiah</option>
            <option value="mixed">Mixed Ancestry</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div class="header-community-label">
        <span>Community:</span>
    </div>
    <div class="header-community-input">
        <select name="attr_community">
            <option value="custom" selected="true"></option>
            <option value="highborne">Highborne</option>
            <option value="loreborne">Loreborne</option>
            <option value="orderborne">Orderborne</option>
            <option value="ridgeborne">Ridgeborne</option>
            <option value="seaborne">Seaborne</option>
            <option value="slyborne">Slyborne</option>
            <option value="underborne">Underborne</option>
            <option value="wanderborne">Wanderborne</option>
            <option value="wildborne">Wildborne</option>
            <option value="custom">Custom</option>
        </select>
    </div>

    <div class="header-class-label">
        <span>Class:</span>
    </div>
    <div class="header-class-input">
        <select name="attr_class">
            <option value="custom" selected="true"></option>
            <option value="bard">Bard</option>
            <option value="druid">Druid</option>
            <option value="guardian">Guardian</option>
            <option value="ranger">Ranger</option>
            <option value="rogue">Rogue</option>
            <option value="seraph">Seraph</option>
            <option value="sorcerer">Sorcerer</option>
            <option value="warrior">Warrior</option>
            <option value="wizard">Wizard</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div class="header-level">
        <span>Level:</span>
        <input class="header-level-input" type="number" name="attr_level" min="1" max="10">
    </div>
    <div class="header-subclass-label">
        <span>Subclass:</span>
    </div>    
    <div class="header-subclass-input">
        <select class="subclassSelect" name="attr_subclass">
            <option value="18" selected="true"></option>
            <option disabled="true">Bard</option>
                <option value="0">Troubadour</option>
                <option value="1">Wordsmith</option>
            <option disabled="true">Druid</option>
                <option value="2">Warden of the Elements</option>
                <option value="3">Warden of Renewal</option>
            <option disabled="true">Guardian</option>
                <option value="4">Stalwart</option>
                <option value="5">Vengeance</option>
            <option disabled="true">Ranger</option>
                <option value="6">Beastbound</option>
                <option value="7">Wayfinder</option>
            <option disabled="true">Rogue</option>
                <option value="8">Nightwalker</option>
                <option value="9">Syndicate</option>
            <option disabled="true">Seraph</option>
                <option value="10">Divine Wielder</option>
                <option value="11">Winged Sentinel</option>
            <option disabled="true">Sorcerer</option>
                <option value="12">Elemental Origin</option>
                <option value="13">Primal Origin</option>
            <option disabled="true">Warrior</option>
                <option value="14">Call of the Brave</option>
                <option value="15">Call of the Slayer</option>
            <option disabled="true">Wizard</option>
                <option value="16">School of Knowledge</option>
                <option value="17">School of War</option>
            <option disabled="true">Custom</option>
                <option value="18">Custom Subclass</option>
        </select>
    </div>
</div>

<!-- RESET BUTTONS -->
<div class="reset-container">
    <button type="action" class="reset-short-rest-button" name="act_short_rest">Short Rest</button>
    <button type="action" class="reset-long-rest-button" name="act_long_rest">Long Rest</button>
    <button type="action" class="reset-session-button" name="act_session_reset">Session Reset</button>
</div>

<!-- TRAITS -->
<div class="traits-container">
    <div class="traits-header">
        <h2>Traits</h2>
    </div>

    <div class="traits-agility-label">
        <b>Agility</b>
    </div>
    <div class="traits-strength-label">
        <b>Strength</b>
    </div>
    <div class="traits-finesse-label">
        <b>Finesse</b>
    </div>
    <div class="traits-instinct-label">
        <b>Instinct</b>
    </div>
    <div class="traits-presence-label">
        <b>Presence</b>
    </div>
    <div class="traits-knowledge-label">
        <b>Knowledge</b>
    </div>

    <div class="traits-agility-input">
        <input type="number" name="attr_agility">
    </div>
    <div class="traits-strength-input">
        <input type="number" name="attr_strength">
    </div>
    <div class="traits-finesse-input">
        <input type="number" name="attr_finesse">
    </div>
    <div class="traits-instinct-input">
        <input type="number" name="attr_instinct">
    </div>
    <div class="traits-presence-input">
        <input type="number" name="attr_presence">
    </div>
    <div class="traits-knowledge-input">
        <input type="number" name="attr_knowledge">
    </div>

    <div class="traits-agility-roll">
        <button type="action" class="duality-roll" name="act_agility">
    </div>
    <div class="traits-strength-roll">
        <button type="action" class="duality-roll" name="act_strength">
    </div>
    <div class="traits-finesse-roll">
        <button type="action" class="duality-roll" name="act_finesse">
    </div>
    <div class="traits-instinct-roll">
        <button type="action" class="duality-roll" name="act_instinct">
    </div>
    <div class="traits-presence-roll">
        <button type="action" class="duality-roll" name="act_presence">
    </div>
    <div class="traits-knowledge-roll">
        <button type="action" class="duality-roll" name="act_knowledge">
    </div>
</div>

<div class="resources-container">
    <!-- HEADER AND RESOURCES INPUTS -->
    <div class="resources-header">
        <h2>Resources</h2>
    </div>
    <div class="evasion-label">
        <b>Evasion</b>
    </div>
    <div class="armor-label">
        <b>Armor</b>
    </div>
    <div class="hp-max-label">
        <b>Max HP</b>
    </div>
    <div class="stress-max-label">
        <b>Max Stress</b>
    </div>

    <div class="resources-spacer"></div>

    <div class="evasion-input">
        <input type="number" name="attr_evasion" min="5" max="25">
    </div>
    <div class="armor-input">
        <input type="number" name="attr_armor" min="0" max="8">
    </div>
    <div class="hp-max-input">
        <input type="number" name="attr_hpmax" min="1" max="12">
    </div>
    <div class="stress-max-input">
        <input type="number" name="attr_stressmax" min="1" max="12">
    </div>

    <!-- HP, THRESHOLDS, & STRESS -->
    <div class="hp-container">
        <div class="centered">
            <h4>Hit Points & Stress</h4>
        </div>

        <div class="hp-slots-container">
            <div class="hp-thresholds">
                <div class="hp-thresholds-label">
                    <b>Damage Thresholds</b>
                </div>
                <div class="hp-thresholds-minor-label">
                    <span>Minor</span> <span class="subtext">1 HP</span>
                </div>
                <div class="hp-thresholds-major-input">
                    <input type="number" name="attr_major_threshold" min="0">
                </div>
                <div class="hp-thresholds-major-label">
                    <span>Major</span> <span class="subtext">2 HP</span>
                </div>
                <div class="hp-thresholds-severe-input">
                    <input type="number" name="attr_severe_threshold" min="0">
                </div>
                <div class="hp-thresholds-severe-label">
                    <span>Severe</span> <span class="subtext">3 HP</span>
                </div>
            </div>

            <div class="centered">
                <b>Armor Slots</b>
                <div class="toggle-group">
                    <input type="hidden" class="toggle" name="attr_armor_toggle0" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot0">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle1" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot1">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle2" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot2">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle3" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot3">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle4" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot4">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle5" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot5">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle6" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot6">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_armor_toggle7" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_armor_slot7">
                        <span class="checked">✖</span>
                    </button>
                </div>
            </div>
            
            <div class="centered">
                <b>HP</b>
                <div class="toggle-group">
                    <input type="hidden" class="toggle" name="attr_hp_toggle0" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot0">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle1" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot1">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle2" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot2">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle3" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot3">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle4" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot4">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle5" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot5">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle6" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot6">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle7" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot7">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle8" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot8">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle9" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot9">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle10" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot10">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_hp_toggle11" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_hp_slot11">
                        <span class="checked">✖</span>
                    </button>
                </div>
            </div>
            
            <div class="centered">
                <b>Stress</b>
                <div class="toggle-group">
                    <input type="hidden" class="toggle" name="attr_stress_toggle0" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot0">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle1" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot1">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle2" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot2">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle3" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot3">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle4" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot4">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle5" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot5">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle6" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot6">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle7" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot7">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle8" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot8">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle9" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot9">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle10" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot10">
                        <span class="checked">✖</span>
                    </button>
                    <input type="hidden" class="toggle" name="attr_stress_toggle11" value="inactive">
                    <button type="action" class="fake-checkbox" name="act_stress_slot11">
                        <span class="checked">✖</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PROFICIENCY & WEAPONS -->
    <div class="weapons-container">
        <div class="centered">
            <h4>Active Weapons</h4>
        </div>

        <div class="centered">
            <b>Proficiency:</b>
            <input type="radio" name="attr_proficiency" value="1" checked="checked"> <span></span>
            <input type="radio" name="attr_proficiency" value="2"> <span></span>
            <input type="radio" name="attr_proficiency" value="3"> <span></span>
            <input type="radio" name="attr_proficiency" value="4"> <span></span>
            <input type="radio" name="attr_proficiency" value="5"> <span></span>
            <input type="radio" name="attr_proficiency" value="6"> <span></span>
        </div>

        <div class="weapons-primary-secondary">
            <div class="weapons-primary-label">
                <b>Primary Weapon</b>
            </div>
            <div class="weapons-primary-input">
                <span class="subtext">Name</span>
                <input type="text" name="attr_weapon_primary_name">
            </div>
            <div class="weapons-primary-range-input">
                <span class="subtext">Range</span>
                <select name="attr_weapon_primary_range">
                    <option value="melee">Melee</option>
                    <option value="very_close">Very Close</option>
                    <option value="close">Close</option>
                    <option value="far">Far</option>
                    <option value="very_far">Very Far</option>
                </select>
            </div>
            <div class="weapons-primary-trait">
                <span class="subtext">Trait</span>
                <select name="attr_weapon_primary_trait">
                    <option value="agility">Agility</option>
                    <option value="strength">Strength</option>
                    <option value="finesse">Finesse</option>
                    <option value="instinct">Instinct</option>
                    <option value="presence">Presence</option>
                    <option value="knowledge">Knowledge</option>
                </select>
            </div>
            <div class="weapons-primary-hit">
                <div class="weapons-primary-hit-label">
                    <span class="subtext">To Hit</span>
                </div>
                <div class="weapons-primary-hit-input">
                    <input type="number" name="attr_weapon_primary_hit" min="-1">
                    <button type="action" class="duality-roll margin-left" name="act_weapon_primary_hit">
                </div>
            </div>
            <div class="weapons-primary-damage">
                <div class="weapons-primary-damage-label">
                    <span class="subtext">Damage</span>
                </div>
                <div class="weapons-primary-damage-dice">
                    <select name="attr_weapon_primary_damage_dice">
                        <option value="d4">d4</option>
                        <option value="d6">d6</option>
                        <option value="d8">d8</option>
                        <option value="d10">d10</option>
                        <option value="d12">d12</option>
                        <option value="d20">d20</option>
                    </select>
                </div>
                <div class="weapons-primary-damage-modifier">
                    +
                    <input type="number" class="weapons-primary-damage-modifier-input" name="attr_weapon_primary_damage_modifier" min="0">
                </div>
                <div class="weapons-primary-damage-type">
                    <select class="weapons-primary-damage-type-input" name="attr_weapon_primary_damage_type">
                        <option value="physical">phys</option>
                        <option value="magical">mag</option>
                    </select>
                    <button type="action" class="damage-roll" name="act_weapon_primary_damage">
                </div>
            </div>

            <div class="weapons-secondary-label">
                <b>Secondary Weapon</b>
            </div>
            <div class="weapons-secondary-input">
                <span class="subtext">Name</span>
                <input type="text" name="attr_weapon_secondary_weapon">
            </div>
            <div class="weapons-secondary-range-input">
                <span class="centered subtext">Range</span>
                <select name="attr_secondary_range">
                    <option value="melee">Melee</option>
                    <option value="very_close">Very Close</option>
                    <option value="close">Close</option>
                    <option value="far">Far</option>
                    <option value="very_far">Very Far</option>
                </select>
            </div>
            <div class="weapons-secondary-trait">
                <span class="centered subtext">Trait</span>
                <select name="attr_weapon_secondary_trait">
                    <option value="agility">Agility</option>
                    <option value="strength">Strength</option>
                    <option value="finesse">Finesse</option>
                    <option value="instinct">Instinct</option>
                    <option value="presence">Presence</option>
                    <option value="knowledge">Knowledge</option>
                </select>
            </div>
            <div class="weapons-secondary-hit">
                <div class="weapons-secondary-hit-label">
                    <span class="subtext">To Hit</span>
                </div>
                <div class="weapons-secondary-hit-input">
                    <input type="number" name="attr_weapon_secondary_hit" min="-1">
                    <button type="action" class="duality-roll margin-left" name="act_weapon_secondary_hit">
                </div>
            </div>
            <div class="weapons-secondary-damage">
                <div class="weapons-secondary-damage-label">
                    <span class="subtext">Damage</span>
                </div>
                <div class="weapons-secondary-damage-dice">
                    <select name="attr_weapon_secondary_damage_dice">
                        <option value="d4">d4</option>
                        <option value="d6">d6</option>
                        <option value="d8">d8</option>
                        <option value="d10">d10</option>
                        <option value="d12">d12</option>
                        <option value="d20">d20</option>
                    </select>
                </div>
                <div class="weapons-secondary-damage-modifier">
                    +
                    <input type="number" class="weapons-secondary-damage-modifier-input" name="attr_weapon_secondary_damage_modifier" min="0">
                </div>
                <div class="weapons-secondary-damage-type">
                    <select class="weapons-secondary-damage-type-input" name="attr_weapon_secondary_damage_type">
                        <option value="physical">phys</option>
                        <option value="magical">mag</option>
                    </select>
                    <button type="action" class="damage-roll" name="act_weapon_secondary_damage">
                </div>
            </div>
        </div>
    </div>

    <!-- HOPE & EXPERIENCES -->
    <div class="hope-container">
        <div class="centered">
            <h4>Hope</h4>
        </div>
        <div class="centered">
            <input type="radio" class="sheet-zero" name="attr_hope" value="0" checked="checked"> <span></span>
            <input type="radio" name="attr_hope" value="1"> <span></span>
            <input type="radio" name="attr_hope" value="2"> <span></span>
            <input type="radio" name="attr_hope" value="3"> <span></span>
            <input type="radio" name="attr_hope" value="4"> <span></span>
            <input type="radio" name="attr_hope" value="5"> <span></span>
            <input type="radio" name="attr_hope" value="6"> <span></span>
        </div>

        <div class="centered">
            <b>Experiences</b>
        </div>

        <div class="hope-experiences-label">
            <div class="hope-experiences-label-description no-top">
                <span class="subtext">Description</span>
            </div>
            <div class="hope-experiences-label-bonus no-top">
                <span class="subtext">Bonus</span>
            </div>
        </div>

        <fieldset class="repeating_experiences">
            <div class="hope-experiences-container">
                <div class="hope-experiences-input">
                    <input type="text" name="attr_experience">
                </div>
                <div class="hope-experiences-bonus">
                    <input type="number" name="attr_experience_bonus" min="2">
                </div>
        </fieldset>
    </div>
</div>

<input type="hidden" class="tabs-toggle" name="attr_sheet_tab" value="domain-features">
<div>
    <button type="action" class="button-domain-features" name="act_button_domain_features">Domain & Features</button>
    <button type="action" class="button-inventory" name="act_button_inventory">Inventory</button>
</div>

<!-- DOMAIN AND FEATURES -->
<div class="domain-features-container">
    <div class="domain-container">
        <h2>Domain Effects</h2>
        <div class="domain-buttons">
            <button type="action" class="domain-buttons-hand" name="act_button_domain_hand">In Hand</button>
            <button type="action" class="domain-buttons-all" name="act_button_domain_all">All</button>
        </div>
        <fieldset class="repeating_domain">
            <input type="hidden" class="toggle-domain" name="attr_domain_toggle" value="show">
            <div class="domain-effect-container no-top">
                <div class="domain-effect-inputs">
                    <input type="hidden" class="toggle-vaulted" name="attr_domain_effect_vaulted_toggle" value="inactive">
                    <div class="domain-effect-inputs-vaulted-toggle no-top">
                        <button type="action" class="chat-print" name="act_domain-effect-chat-print">
                        </button>
                        <span class="margin-left">Vaulted: </span>
                        <button type="action" class="fake-checkbox margin-left margin-right" name="act_domain-effect-vaulted-slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <div class="domain-effect-inputs-recall no-top">
                        <span>Recall: </span>
                        <input type="number" name="attr_domain_effect_recall" min="0">
                    </div>
                    <div class="domain-effect-inputs-level no-top">
                        <span>Level: </span>
                        <input type="number" name="attr_domain_effect_level" min="0" max="10">
                    </div>
                    <select class="domain-effect-inputs-domain" name="attr_domain_effect_domain">
                        <option value="arcana">Arcana</option>
                        <option value="blade">Blade</option>
                        <option value="bone">Bone</option>
                        <option value="codex">Codex</option>
                        <option value="grace">Grace</option>
                        <option value="midnight">Midnight</option>
                        <option value="sage">Sage</option>
                        <option value="splendor">Splendor</option>
                        <option value="valor">Valor</option>
                        <option value="custom">Custom</option>
                    </select>
                    <input type="text" class="domain-effect-inputs-name" name="attr_domain_effect_name">
                    <input type="hidden" class="toggle-used" name="attr_domain_effect_used_toggle" value="inactive">
                    <div class="domain-effect-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_domain-effect-used-slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <div class="domain-effect-inputs-tokens-toggle no-top">
                        <span>Tokens: </span>
                        <input type="number" name="attr_domain_effect_tokens" min="0">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_domain_effect_desc"></textarea>
                <div class="domain-effect-tracker no-top">
                    <div class="domain-effect-tracker-label">
                        <span>Refreshes on...</span>
                    </div>
                    <input type="hidden" class="toggle-shortrest" name="attr_domain_effect_shortrest_toggle" value="inactive">
                    <div class="domain-effect-tracker-shortrest-toggle no-top">
                        <span class="subtext">Short Rest: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_domain-effect-shortrest-slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-longrest" name="attr_domain_effect_longrest_toggle" value="inactive">
                    <div class="domain-effect-tracker-longrest-toggle no-top">
                        <span class="subtext">Long Rest: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_domain-effect-longrest-slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-session" name="attr_domain_effect_session_toggle" value="inactive">
                    <div class="domain-effect-tracker-session-toggle no-top">
                        <span class="subtext">Session: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_domain-effect-session-slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>

    <!-- FEATURES -->
    <div class="features-container">
        <h2>Features</h2>
        <h4>Unique Hope Feature</h4>
        <div class="features-unique">
            <div class="features-unique-inputs">
                <input type="text" class="features-unique-name-input" name="attr_feature_unique_name">
                <button type="action" class="chat-print" name="act_feature_unique_chat_print">
            </div>
            <textarea class="features-small-textarea" name="attr_feature_unique_desc"></textarea>
        </div>

        <h4>Class Features</h4>
        <div class="features-class">
            <div class="features-class0">
                <div class="features-class-inputs">
                    <input type="text" class="features-class-inputs-name" name="attr_feature_class0_name">
                    <input type="hidden" class="toggle-used" name="attr_feature_class0_used_toggle" value="inactive">
                    <input type="hidden" class="toggle-refresh" name="attr_feature_class0_used_refresh" value="never">
                    <div class="features-class-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox" name="act_feature_class0_used_slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-tokens" name="attr_feature_class0_tokens_toggle" value="inactive">
                    <div class="features-class-inputs-tokens-toggle no-top">
                        <span>Tokens: </span>
                        <input type="number" name="attr_feature_class0_tokens" min="0">
                    </div>
                    <div class="features-class-inputs-chat-print no-top">
                        <button type="action" class="chat-print" name="act_feature_class0_chat_print">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_feature_class0_desc"></textarea>
            </div>
            <input type="hidden" class="toggle-class1" name="attr_feature_class1_toggle" value="shown">
            <div class="features-class1">
                <div class="features-class-inputs">
                    <input type="text" class="features-class-inputs-name" name="attr_feature_class1_name">
                    <input type="hidden" class="toggle-used" name="attr_feature_class1_used_toggle" value="inactive">
                    <input type="hidden" class="toggle-refresh" name="attr_feature_class1_used_refresh" value="never">
                    <div class="features-class-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox" name="act_feature_class1_used_slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-tokens" name="attr_feature_class1_tokens_toggle" value="inactive">
                    <div class="features-class-inputs-tokens-toggle no-top">
                        <span>Tokens: </span>
                        <input type="number" name="attr_feature_class1_tokens" min="0">
                    </div>
                    <div class="features-class-inputs-chat-print no-top">
                        <button type="action" class="chat-print" name="act_feature_class1_chat_print">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_feature_class1_desc"></textarea>
            </div>
            <input type="hidden" class="toggle-class2" name="attr_feature_class2_toggle" value="shown">
            <div class="features-class2">
                <div class="features-class-inputs">
                    <input type="text" class="features-class-inputs-name" name="attr_feature_class2_name">
                    <input type="hidden" class="toggle-used" name="attr_feature_class2_used_toggle" value="inactive">
                    <input type="hidden" class="toggle-refresh" name="attr_feature_class2_used_refresh" value="never">
                    <div class="features-class-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox" name="act_feature_class2_used_slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-tokens" name="attr_feature_class2_tokens_toggle" value="inactive">
                    <div class="features-class-inputs-tokens-toggle no-top">
                        <span>Tokens: </span>
                        <input type="number" name="attr_feature_class2_tokens" min="0">
                    </div>
                    <div class="features-class-inputs-chat-print no-top">
                        <button type="action" class="chat-print" name="act_feature_class2_chat_print">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_feature_class2_desc"></textarea>
            </div>
        </div>

        <h4>Subclass Features</h4>
        <input type="hidden" class="toggle-subclass-multiclass" name="attr_feature_subclass_multiclass_toggle" value="inactive">
        <input type="hidden" class="toggle-subclass-specialized" name="attr_feature_subclass_specialized_toggle" value="inactive">
        <input type="hidden" class="toggle-subclass-mastered" name="attr_feature_subclass_mastered_toggle" value="inactive">
        <input type="hidden" class="toggle-multiclass-specialized" name="attr_feature_multiclass_specialized_toggle" value="hidden">
        <div class="features-subclass-header">
            <div class="features-subclass-header-multiclass-toggle">
                <span>Multiclass: </span>
                <button type="action" class="fake-checkbox" name="act_feature_subclass_multiclass_slot">
                    <span class="checked">✖</span>
                </button>
            </div>
            <div class="features-subclass-header-multiclass-dropdown">
                <select class="subclassSelect" name="attr_multiclass">
                    <option value="18" selected="true"></option>
                    <option disabled="true">Bard</option>
                        <option value="0">Troubadour</option>
                        <option value="1">Wordsmith</option>
                    <option disabled="true">Druid</option>
                        <option value="2">Warden of the Elements</option>
                        <option value="3">Warden of Renewal</option>
                    <option disabled="true">Guardian</option>
                        <option value="4">Stalwart</option>
                        <option value="5">Vengeance</option>
                    <option disabled="true">Ranger</option>
                        <option value="6">Beastbound</option>
                        <option value="7">Wayfinder</option>
                    <option disabled="true">Rogue</option>
                        <option value="8">Nightwalker</option>
                        <option value="9">Syndicate</option>
                    <option disabled="true">Seraph</option>
                        <option value="10">Divine Wielder</option>
                        <option value="11">Winged Sentinel</option>
                    <option disabled="true">Sorcerer</option>
                        <option value="12">Elemental Origin</option>
                        <option value="13">Primal Origin</option>
                    <option disabled="true">Warrior</option>
                        <option value="14">Call of the Brave</option>
                        <option value="15">Call of the Slayer</option>
                    <option disabled="true">Wizard</option>
                        <option value="16">School of Knowledge</option>
                        <option value="17">School of War</option>
                    <option disabled="true">Custom</option>
                        <option value="18">Custom Subclass</option>
                </select>
            </div>
            <div class="features-subclass-header-specialized-toggle">
                <span>Specialized: </span>
                <button type="action" class="fake-checkbox" name="act_feature_subclass_specialized_slot">
                    <span class="checked">✖</span>
                </button>
            </div>
            <div class="features-subclass-header-mastered-toggle">
                <div class="features-subclass-header-mastered-toggle-container">
                    <span>Mastered: </span>
                    <button type="action" class="fake-checkbox" name="act_feature_subclass_mastered_slot">
                        <span class="checked">✖</span>
                    </button>
                </div>
                <div class="features-subclass-header-multiclass-specialized">
                    <span>Multiclass Specialized: </span>
                    <button type="action" class="fake-checkbox" name="act_feature_multiclass_specialized_slot">
                        <span class="checked">✖</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="features-subclass">
            <input type="hidden" class="toggle-spellcasting-trait" name="attr_feature_subclass_spellcast_trait">
            <div class="features-subclass-spellcasting-container">
                <span class="features-subclass-spellcasting-label">Spellcasting Trait: </span>
                <input type="text" class="features-subclass-spellcasting-input" name="attr_feature_subclass_spellcast_trait">
            </div>
            <div class="features-subclass-foundation0">
                <div class="features-subclass-inputs">
                    <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_foundation0_name">
                    <input type="hidden" class="toggle-used" name="attr_feature_subclass_foundation0_used_toggle" value="inactive">
                    <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_foundation0_used_refresh" value="never">
                    <div class="features-subclass-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_foundation0_used_slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <input type="hidden" class="toggle-tokens" name="attr_feature_subclass_foundation0_tokens_toggle" value="inactive">
                    <div class="features-subclass-inputs-tokens-toggle no-top">
                        <span>Tokens: </span>
                        <input type="number" name="attr_feature_subclass_foundation0_tokens" min="0">
                    </div>
                    <div class="features-subclass-inputs-chat-print no-top">
                        <button type="action" class="chat-print" name="act_feature_subclass_foundation0_chat_print">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_feature_subclass_foundation0_desc"></textarea>
            </div>
            <input type="hidden" class="toggle-subclass-foundation1" name="attr_feature_subclass_foundation1_toggle" value="shown">
            <div class="features-subclass-foundation1">
                <div class="features-subclass-inputs">
                    <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_foundation1_name">
                    <input type="hidden" class="toggle-used" name="attr_feature_subclass_foundation1_used_toggle" value="inactive">
                    <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_foundation1_used_refresh" value="never">
                    <div class="features-subclass-inputs-used-toggle no-top">
                        <span>Used: </span>
                        <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_foundation1_used_slot">
                            <span class="checked">✖</span>
                        </button>
                    </div>
                    <div class="features-subclass-inputs-chat-print no-top">
                        <button type="action" class="chat-print" name="act_feature_subclass_foundation1_chat_print">
                    </div>
                </div>
                <textarea class="features-big-textarea" name="attr_feature_subclass_foundation1_desc"></textarea>
            </div>
            <div class="features-subclass-specialization-container">
                <div class="features-subclass-specialization0 no-top">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_specialization0_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_subclass_specialization0_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_specialization0_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_specialization0_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_subclass_specialization0_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_subclass_specialization0_desc"></textarea>
                </div>
                <input type="hidden" class="toggle-subclass-specialization1" name="attr_feature_subclass_specialization1_toggle" value="shown">
                <div class="features-subclass-specialization1 no-top">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_specialization1_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_subclass_specialization1_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_specialization0_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_specialization1_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_subclass_specialization1_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_subclass_specialization1_desc"></textarea>
                </div>
            </div>
            <div class="features-subclass-multiclass-container">
                <div class="features-multiclass-foundation0">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_multiclass_foundation0_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_multiclass_foundation0_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_multiclass_foundation0_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_multiclass_foundation0_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <input type="hidden" class="toggle-tokens" name="attr_feature_multiclass_foundation0_tokens_toggle" value="inactive">
                        <div class="features-subclass-inputs-tokens-toggle no-top">
                            <span>Tokens: </span>
                            <input type="number" name="attr_feature_multiclass_foundation0_tokens" min="0">
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_multiclass_foundation0_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_multiclass_foundation0_desc"></textarea>
                </div>
                <input type="hidden" class="toggle-multiclass-foundation1" name="attr_feature_multiclass_foundation1_toggle" value="shown">
                <div class="features-multiclass-foundation1">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_multiclass_foundation1_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_multiclass_foundation1_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_multiclass_foundation1_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_multiclass_foundation1_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_multiclass_foundation1_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_multiclass_foundation1_desc"></textarea>
                </div>
            </div>
            <div class="features-subclass-multiclass-specialization-container">
                <div class="features-multiclass-specialization0">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_multiclass_specialization0_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_multiclass_specialization0_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_multiclass_specialization0_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_multiclass_specialization0_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_multiclass_specialization0_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_multiclass_specialization0_desc"></textarea>
                </div>
                <input type="hidden" class="toggle-multiclass-specialization1" name="attr_feature_multiclass_specialization1_toggle" value="shown">
                <div class="features-multiclass-specialization1">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_multiclass_specialization1_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_multiclass_specialization1_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_multiclass_specialization1_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_multiclass_specialization1_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_multiclass_specialization1_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_multiclass_specialization1_desc"></textarea>
                </div>
            </div>
            <div class="features-subclass-mastery-container">
                <div class="features-subclass-mastery0 no-top">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_mastery0_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_subclass_mastery0_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_mastery0_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_mastery0_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_subclass_mastery0_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_subclass_mastery0_desc"></textarea>
                </div>
                <input type="hidden" class="toggle-subclass-mastery1" name="attr_feature_subclass_mastery1_toggle" value="shown">
                <div class="features-subclass-mastery1 no-top">
                    <div class="features-subclass-inputs">
                        <input type="text" class="features-subclass-inputs-name" name="attr_feature_subclass_mastery1_name">
                        <input type="hidden" class="toggle-used" name="attr_feature_subclass_mastery1_used_toggle" value="inactive">
                        <input type="hidden" class="toggle-refresh" name="attr_feature_subclass_mastery1_used_refresh" value="never">
                        <div class="features-subclass-inputs-used-toggle no-top">
                            <span>Used: </span>
                            <button type="action" class="fake-checkbox margin-left" name="act_feature_subclass_mastery1_used_slot">
                                <span class="checked">✖</span>
                            </button>
                        </div>
                        <div class="features-subclass-inputs-chat-print no-top">
                            <button type="action" class="chat-print" name="act_feature_subclass_mastery1_chat_print">
                        </div>
                    </div>
                    <textarea class="features-big-textarea" name="attr_feature_subclass_mastery1_desc"></textarea>
                </div>
            </div>
        </div>

        <h4>Ancestry Features</h4>
        <input type="hidden" class="toggle-ancestry-mixed" name="attr_feature_ancestry_mixed_toggle" value="hidden">
        <div class="features-ancestry-mixed-container">
            <span class="features-ancestry-mixed-label0">First:</span>
            <select class="features-ancestry-mixed-input0" name="attr_feature_ancestry_mixed0">
                <option value="" selected="selected"></option>
                <option value="clank">Clank</option>
                <option value="drakona">Drakona</option>
                <option value="dwarf">Dwarf</option>
                <option value="elf">Elf</option>
                <option value="faerie">Faerie</option>
                <option value="faun">Faun</option>
                <option value="firbolg">Firbolg</option>
                <option value="fungril">Fungril</option>
                <option value="galapa">Galapa</option>
                <option value="giant">Giant</option>
                <option value="goblin">Goblin</option>
                <option value="halfling">Halfling</option>
                <option value="human">Human</option>
                <option value="infernis">Infernis</option>
                <option value="katari">Katari</option>
                <option value="orc">Orc</option>
                <option value="ribbet">Ribbet</option>
                <option value="simiah">Simiah</option>
                <option value="custom">Custom</option>
            </select>
            <span class="features-ancestry-mixed-label1">Second:</span>
            <select class="features-ancestry-mixed-input1" name="attr_feature_ancestry_mixed1">
                <option value="" selected="selected"></option>
                <option value="clank">Clank</option>
                <option value="drakona">Drakona</option>
                <option value="dwarf">Dwarf</option>
                <option value="elf">Elf</option>
                <option value="faerie">Faerie</option>
                <option value="faun">Faun</option>
                <option value="firbolg">Firbolg</option>
                <option value="fungril">Fungril</option>
                <option value="galapa">Galapa</option>
                <option value="giant">Giant</option>
                <option value="goblin">Goblin</option>
                <option value="halfling">Halfling</option>
                <option value="human">Human</option>
                <option value="infernis">Infernis</option>
                <option value="katari">Katari</option>
                <option value="orc">Orc</option>
                <option value="ribbet">Ribbet</option>
                <option value="simiah">Simiah</option>
                <option value="custom">Custom</option>
            </select>
        </div>
        <div class="features-ancestry-container">
            <div class="features-ancestry-inputs no-top">
                <input type="text" class="features-ancestry-inputs-name" name="attr_feature_ancestry0_name">
                <input type="hidden" class="toggle-ancestry0-used" name="attr_feature_ancestry0_used_toggle" value="inactive">
                <input type="hidden" class="toggle-used" name="attr_feature_ancestry0_used_refresh" value="never">
                <div class="features-ancestry-inputs-used-toggle no-top">
                    <span>Used: </span>
                    <button type="action" class="fake-checkbox margin-left" name="act_feature_ancestry0_used_slot">
                        <span class="checked">✖</span>
                    </button>
                </div>
                <div class="features-ancestry-inputs-chat-print no-top">
                    <button type="action" class="chat-print" name="act_feature_ancestry0_chat_print">
                </div>
            </div>
            <textarea class="features-small-textarea" name="attr_feature_ancestry0_desc"></textarea>
        </div>
        <div class="features-ancestry-container">
            <div class="features-ancestry-inputs no-top">
                <input type="text" class="features-ancestry-inputs-name" name="attr_feature_ancestry1_name">
                <input type="hidden" class="toggle-ancestry1-used" name="attr_feature_ancestry1_used_toggle" value="inactive">
                <input type="hidden" class="toggle-refresh" name="attr_feature_ancestry1_used_refresh" value="never">
                <div class="features-ancestry-inputs-used-toggle no-top">
                    <span>Used: </span>
                    <button type="action" class="fake-checkbox margin-left" name="act_feature_ancestry1_used_slot">
                        <span class="checked">✖</span>
                    </button>
                </div>
                <div class="features-ancestry-inputs-chat-print no-top">
                    <button type="action" class="chat-print" name="act_feature_ancestry1_chat_print">
                </div>
            </div>
            <textarea class="features-small-textarea" name="attr_feature_ancestry1_desc"></textarea>
        </div>

        <h4>Community Features</h4>
        <div class="features-community-container">
            <div class="features-community-inputs">
                <input type="text" class="features-community-inputs-name" name="attr_feature_community_name">
                <input type="hidden" class="toggle-used" name="attr_feature_community_used_toggle" value="inactive">
                <input type="hidden" class="toggle-refresh" name="attr_feature_community_used_refresh" value="never">
                <div class="features-community-inputs-used-toggle no-top">
                    <span>Used: </span>
                    <button type="action" class="fake-checkbox margin-left" name="act_feature_community_used_slot">
                        <span class="checked">✖</span>
                    </button>
                </div>
                <input type="hidden" class="toggle-tokens" name="attr_feature_community_tokens_toggle" value="inactive">
                <div class="features-community-inputs-tokens-toggle no-top">
                    <span>Tokens: </span>
                    <input type="number" name="attr_feature_community_tokens" min="0">
                </div>
                <div class="features-community-inputs-chat-print no-top">
                    <button type="action" class="chat-print" name="act_feature_community_chat_print">
                </div>
            </div>
            <textarea class="features-big-textarea" name="attr_feature_community_desc"></textarea>
        </div>
    </div>
</div>

<div class="inventory-container">
    <div class="inventory-gold centered">
        <h2>Gold</h2>
        <div class="inventory-gold-container">
            <div>
                <span class="inventory-gold-label">Handfuls: </span>
                <input type="radio" class="sheet-zero" name="attr_gold_handfuls" value="0" checked="checked"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="1"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="2"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="3"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="4"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="5"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="6"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="7"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="8"> <span></span>
                <input type="radio" name="attr_gold_handfuls" value="9"> <span></span>
            </div>

            <div>
                <span class="inventory-gold-label">Bags: </span>
                <input type="radio" class="sheet-zero" name="attr_gold_bags" value="0" checked="checked"> <span></span>
                <input type="radio" name="attr_gold_bags" value="1"> <span></span>
                <input type="radio" name="attr_gold_bags" value="2"> <span></span>
                <input type="radio" name="attr_gold_bags" value="3"> <span></span>
                <input type="radio" name="attr_gold_bags" value="4"> <span></span>
                <input type="radio" name="attr_gold_bags" value="5"> <span></span>
                <input type="radio" name="attr_gold_bags" value="6"> <span></span>
                <input type="radio" name="attr_gold_bags" value="7"> <span></span>
                <input type="radio" name="attr_gold_bags" value="8"> <span></span>
                <input type="radio" name="attr_gold_bags" value="9"> <span></span>
            </div>

        <div>
            <span class="inventory-gold-label">Chest: </span>
            <input type="radio" class="sheet-zero" name="attr_gold_chest" value="0" checked="checked"> <span></span>
            <input type="radio" name="attr_gold_chest" value="1"> <span></span>
        </div>
    </div>

    <h2>Inventory</h2>
    <div class="inventory-label">
        <div class="inventory-label-quantity no-top">
            <span class="subtext">#</span>
        </div>
        <div class="inventory-label-item no-top">
            <span class="subtext">Item</span>
        </div>
    </div>

    <fieldset class="repeating_inventory">
        <div class="inventory-items-container">
            <div class="inventory-items-container-quantity">
                <input type="number" name="attr_item_quantity" min="0">
            </div>
            <div class="inventory-items-container-name">
                <input type="text" name="attr_item_name">
            </div>
    </fieldset>
</div>

<rolltemplate class="sheet-rolltemplate-duality">
    <div class="sheet-duality-container">
        <div class="sheet-duality-name">
            <h3>Duality - {{name}}</h3>
        </div>
        <div class="sheet-duality-rolls">
            <div class="sheet-duality-hope no-top">
                Hope: {{hopeDie}}
            </div>
            <div class="sheet-duality-fear no-top">
                Fear: {{fearDie}}
            </div>
            <div class="sheet-duality-trait no-top">
                Trait:
                {{#rollGreater() trait 0}}
                    <b>+</b>
                {{/rollGreater() trait 0}}
                {{trait}}
            </div>
        </div>
        <div class="sheet-duality-modifiers">
            {{#^rollTotal() mod 0}}
                <div class="sheet-duality-mod">
                    Modifier:
                    {{#rollGreater() mod 0}}
                        <b>+</b>
                    {{/rollGreater() mod 0}}
                    {{mod}}
                </div>
            {{/^rollTotal() mod 0}}
            {{#withAdv}}
                <div class="sheet-duality-adv">
                    {{withAdv}}: {{adv}}
                </div>
            {{/withAdv}}
        </div>
        <div class="sheet-duality-total">
            Total: <span class="sheet-total">{{computed::result}}</span>
            {{#rollTotal() hopeDie fearDie}}
                <span class="sheet-duality-condition">- Critical Success!</span>
            {{/rollTotal() hopeDie fearDie}}
            {{#rollGreater() hopeDie fearDie}}
                <span class="sheet-duality-condition sheet-hope">with Hope</span>
            {{/rollGreater() hopeDie fearDie}}
            {{#rollLess() hopeDie fearDie}}
                <span class="sheet-duality-condition sheet-fear">with Fear</span>
            {{/rollLess() hopeDie fearDie}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-damage">
    <div class="sheet-damage-container">
        <div class="sheet-damage-name">
            <h3>Damage - {{name}}</h3>
        </div>
        <div class="sheet-damage-message">
            Rolling <b>{{proficiency}}{{dieSize}}+{{modifier}}</b>...
        </div>
        <div class="sheet-damage-total">
            Total: {{total}} {{type}} damage
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-print-domain">
    <div class="sheet-print-domain-container">
        <div class="sheet-print-domain-name">
            <h3>Domain Effect - {{name}}</h3>
        </div>
        <div class="sheet-print-domain-details">
            <i>Level {{level}} {{domain}}</i>
        </div>
        <div class="sheet-print-domain-description">
            {{description}}
        </div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-print-feature">
    <div class="sheet-print-feature-container">
        <div class="sheet-print-feature-name">
            <h3>{{category}} Feature - {{name}}</h3>
        </div>
        <div class="sheet-print-feature-description">
            {{description}}
        </div>
    </div>
</rolltemplate>

<script type="text/worker">
    const slotToggles = [
        {
            type: "armor",
            slot: "armor_slot0",
            toggle: "Armor_toggle0"
        }, {
            type: "armor",
            slot: "armor_slot1",
            toggle: "Armor_toggle1"
        }, {
            type: "armor",
            slot: "armor_slot2",
            toggle: "Armor_toggle2"
        }, {
            type: "armor",
            slot: "armor_slot3",
            toggle: "Armor_toggle3"
        }, {
            type: "armor",
            slot: "armor_slot4",
            toggle: "Armor_toggle4"
        }, {
            type: "armor",
            slot: "armor_slot5",
            toggle: "Armor_toggle5"
        }, {
            type: "armor",
            slot: "armor_slot6",
            toggle: "Armor_toggle6"
        }, {
            type: "armor",
            slot: "armor_slot7",
            toggle: "Armor_toggle7"
        }, {
            type: "hp",
            slot: "hp_slot0",
            toggle: "Hp_toggle0"
        }, {
            type: "hp",
            slot: "hp_slot1",
            toggle: "Hp_toggle1"
        }, {
            type: "hp",
            slot: "hp_slot2",
            toggle: "Hp_toggle2"
        }, {
            type: "hp",
            slot: "hp_slot3",
            toggle: "Hp_toggle3"
        }, {
            type: "hp",
            slot: "hp_slot4",
            toggle: "Hp_toggle4"
        }, {
            type: "hp",
            slot: "hp_slot5",
            toggle: "Hp_toggle5"
        }, {
            type: "hp",
            slot: "hp_slot6",
            toggle: "Hp_toggle6"
        }, {
            type: "hp",
            slot: "hp_slot7",
            toggle: "Hp_toggle7"
        }, {
            type: "hp",
            slot: "hp_slot8",
            toggle: "Hp_toggle8"
        }, {
            type: "hp",
            slot: "hp_slot9",
            toggle: "Hp_toggle9"
        }, {
            type: "hp",
            slot: "hp_slot10",
            toggle: "Hp_toggle10"
        }, {
            type: "hp",
            slot: "hp_slot11",
            toggle: "Hp_toggle11"
        }, {
            type: "stress",
            slot: "stress_slot0",
            toggle: "Stress_toggle0"
        }, {
            type: "stress",
            slot: "stress_slot1",
            toggle: "Stress_toggle1"
        }, {
            type: "stress",
            slot: "stress_slot2",
            toggle: "Stress_toggle2"
        }, {
            type: "stress",
            slot: "stress_slot3",
            toggle: "Stress_toggle3"
        }, {
            type: "stress",
            slot: "stress_slot4",
            toggle: "Stress_toggle4"
        }, {
            type: "stress",
            slot: "stress_slot5",
            toggle: "Stress_toggle5"
        }, {
            type: "stress",
            slot: "stress_slot6",
            toggle: "Stress_toggle6"
        }, {
            type: "stress",
            slot: "stress_slot7",
            toggle: "Stress_toggle7"
        }, {
            type: "stress",
            slot: "stress_slot8",
            toggle: "Stress_toggle8"
        }, {
            type: "stress",
            slot: "stress_slot9",
            toggle: "Stress_toggle9"
        }, {
            type: "stress",
            slot: "stress_slot10",
            toggle: "Stress_toggle10"
        }, {
            type: "stress",
            slot: "stress_slot11",
            toggle: "Stress_toggle11"
        }, {
            type: "domain",
            slot: "domain-effect-used-slot",
            toggle: "Domain_effect_used_toggle"
        }, {
            type: "domain",
            slot: "domain-effect-vaulted-slot",
            toggle: "Domain_effect_vaulted_toggle"
        }, {
            type: "domain",
            slot: "domain-effect-shortrest-slot",
            toggle: "Domain_effect_shortrest_toggle"
        }, {
            type: "domain",
            slot: "domain-effect-longrest-slot",
            toggle: "Domain_effect_longrest_toggle"
        }, {
            type: "domain",
            slot: "domain-effect-session-slot",
            toggle: "Domain_effect_session_toggle"
        }, {
            type: "feature",
            slot: "feature_class0_used_slot",
            toggle: "Feature_class0_used_toggle",
            refresh: "Feature_class0_used_refresh"
        }, {
            type: "feature",
            slot: "feature_class1_used_slot",
            toggle: "Feature_class1_used_toggle",
            refresh: "Feature_class1_used_refresh",
            name: "Feature_class1_name"
        }, {
            type: "feature",
            slot: "feature_class2_used_slot",
            toggle: "Feature_class2_used_toggle",
            refresh: "Feature_class2_used_refresh",
            name: "Feature_class2_name"
        }, {
            type: "feature",
            slot: "feature_subclass_multiclass_slot",
            toggle: "Feature_subclass_multiclass_toggle"
        }, {
            type: "feature",
            slot: "feature_multiclass_specialized_slot",
            toggle: "Feature_multiclass_specialized_toggle"
        }, {
            type: "feature",
            slot: "feature_subclass_specialized_slot",
            toggle: "Feature_subclass_specialized_toggle"
        }, {
            type: "feature",
            slot: "feature_subclass_mastered_slot",
            toggle: "Feature_subclass_mastered_toggle"
        }, {
            type: "feature",
            slot: "feature_subclass_foundation0_used_slot",
            toggle: "Feature_subclass_foundation0_used_toggle",
            refresh: "Feature_subclass_foundation0_used_refresh",
            name: "Feature_subclass_foundation0_name"
        }, {
            type: "feature",
            slot: "feature_subclass_foundation1_used_slot",
            toggle: "Feature_subclass_foundation1_used_toggle",
            refresh: "Feature_subclass_foundation1_used_refresh",
            name: "Feature_subclass_foundation1_name"
        }, {
            type: "feature",
            slot: "feature_subclass_specialization0_used_slot",
            toggle: "Feature_subclass_specialization0_used_toggle",
            refresh: "Feature_subclass_specialization0_used_refresh",
            name: "Feature_subclass_specialization0_name"
        }, {
            type: "feature",
            slot: "feature_subclass_specialization1_used_slot",
            toggle: "Feature_subclass_specialization1_used_toggle",
            refresh: "Feature_subclass_specialization1_used_refresh",
            name: "Feature_subclass_specialization1_name"
        }, {
            type: "feature",
            slot: "feature_multiclass_foundation0_used_slot",
            toggle: "Feature_multiclass_foundation0_used_toggle",
            refresh: "Feature_multiclass_foundation0_used_refresh",
            name: "Feature_multiclass_foundation0_name"
        }, {
            type: "feature",
            slot: "feature_multiclass_foundation1_used_slot",
            toggle: "Feature_multiclass_foundation1_used_toggle",
            refresh: "Feature_multiclass_foundation1_used_refresh",
            name: "Feature_multiclass_foundation1_name"
        }, {
            type: "feature",
            slot: "feature_multiclass_specialization0_used_slot",
            toggle: "Feature_multiclass_specialization0_used_toggle",
            refresh: "Feature_multiclass_specialization0_used_refresh",
            name: "Feature_multiclass_specialization0_name"
        }, {
            type: "feature",
            slot: "feature_multiclass_specialization1_used_slot",
            toggle: "Feature_multiclass_specialization1_used_toggle",
            refresh: "Feature_multiclass_specialization1_used_refresh",
            name: "Feature_multiclass_specialization1_name"
        }, {
            type: "feature",
            slot: "feature_subclass_mastery0_used_slot",
            toggle: "Feature_subclass_mastery0_used_toggle",
            refresh: "Feature_subclass_mastery0_used_refresh",
            name: "Feature_subclass_mastery0_name"
        }, {
            type: "feature",
            slot: "feature_subclass_mastery1_used_slot",
            toggle: "Feature_subclass_mastery1_used_toggle",
            refresh: "Feature_subclass_mastery1_used_refresh",
            name: "Feature_subclass_mastery1_name"
        }, {
            type: "feature",
            slot: "feature_ancestry0_used_slot",
            toggle: "Feature_ancestry0_used_toggle",
            refresh: "Feature_ancestry0_used_refresh",
            name: "Feature_ancestry0_name"
        }, {
            type: "feature",
            slot: "feature_ancestry1_used_slot",
            toggle: "Feature_ancestry1_used_toggle",
            refresh: "Feature_ancestry1_used_refresh",
            name: "Feature_ancestry1_name"
        }, {
            type: "feature",
            slot: "feature_community_used_slot",
            toggle: "Feature_community_used_toggle",
            refresh: "Feature_community_used_refresh",
            name: "Feature_community_name"
        }
    ];

    const rollButtons = [
        {
            template: "duality",
            button: "agility",
            modifier: "Agility",
            name: "Agility"
        }, {
            template: "duality",
            button: "strength",
            modifier: "Strength",
            name: "Strength"
        }, {
            template: "duality",
            button: "finesse",
            modifier: "Finesse",
            name: "Finesse"
        }, {
            template: "duality",
            button: "instinct",
            modifier: "Instinct",
            name: "Instinct"
        }, {
            template: "duality",
            button: "presence",
            modifier: "Presence",
            name: "Presence"
        }, {
            template: "duality",
            button: "knowledge",
            modifier: "Knowledge",
            name: "Knowledge"
        }, {
            template: "duality",
            button: "weapon_primary_hit",
            modifier: "Weapon_primary_hit",
            name: "Primary Weapon"
        }, {
            template: "duality",
            button: "weapon_secondary_hit",
            modifier: "Weapon_secondary_hit",
            name: "Secondary Weapon"
        }, {
            template: "damage",
            button: "weapon_primary_damage",
            toggle: "primary",
            name: "Damage - Primary Weapon"
        }, {
            template: "damage",
            button: "weapon_secondary_damage",
            toggle: "secondary",
            name: "Damage - Secondary Weapon"
        }
    ];

    const printButtons = [
        {
            template: "domain",
            button: "domain-effect-chat-print",
            domain: "repeating_domain_domain_effect_domain",
            level: "repeating_domain_domain_effect_level",
            name: "repeating_domain_domain_effect_name",
            description: "repeating_domain_domain_effect_desc"
        }, {
            template: "feature",
            category: "Unique Hope",
            button: "feature_unique_chat_print",
            name: "feature_unique_name",
            description: "feature_unique_desc"
        }, {
            template: "feature",
            category: "Class",
            button: "feature_class0_chat_print",
            name: "feature_class0_name",
            description: "feature_class0_desc"
        }, {
            template: "feature",
            category: "Class",
            button: "feature_class1_chat_print",
            name: "feature_class1_name",
            description: "feature_class1_desc"
        }, {
            template: "feature",
            category: "Class",
            button: "feature_class2_chat_print",
            name: "feature_class2_name",
            description: "feature_class2_desc"
        }, {
            template: "feature",
            category: "Subclass Foundation",
            button: "feature_subclass_foundation0_chat_print",
            name: "feature_subclass_foundation0_name",
            description: "feature_subclass_foundation0_desc"
        }, {
            template: "feature",
            category: "Subclass Foundation",
            button: "feature_subclass_foundation1_chat_print",
            name: "feature_subclass_foundation1_name",
            description: "feature_subclass_foundation1_desc"
        }, {
            template: "feature",
            category: "Subclass Specialization",
            button: "feature_subclass_specialization0_chat_print",
            name: "feature_subclass_specialization0_name",
            description: "feature_subclass_specialization0_desc"
        }, {
            template: "feature",
            category: "Subclass Specialization",
            button: "feature_subclass_specialization1_chat_print",
            name: "feature_subclass_specialization1_name",
            description: "feature_subclass_specialization1_desc"
        }, {
            template: "feature",
            category: "Multiclass Foundation",
            button: "feature_multiclass_foundation0_chat_print",
            name: "feature_multiclass_foundation0_name",
            description: "feature_multiclass_foundation0_desc"
        }, {
            template: "feature",
            category: "Multiclass Foundation",
            button: "feature_multiclass_foundation1_chat_print",
            name: "feature_multiclass_foundation1_name",
            description: "feature_multiclass_foundation1_desc"
        }, {
            template: "feature",
            category: "Multiclass Specialization",
            button: "feature_multiclass_specialization0_chat_print",
            name: "feature_multiclass_specialization0_name",
            description: "feature_multiclass_specialization0_desc"
        }, {
            template: "feature",
            category: "Multiclass Specialization",
            button: "feature_multiclass_specialization1_chat_print",
            name: "feature_multiclass_specialization1_name",
            description: "feature_multiclass_specialization1_desc"
        }, {
            template: "feature",
            category: "Subclass Mastery",
            button: "feature_subclass_mastery0_chat_print",
            name: "feature_subclass_mastery0_name",
            description: "feature_subclass_mastery0_desc"
        }, {
            template: "feature",
            category: "Subclass Mastery",
            button: "feature_subclass_mastery1_chat_print",
            name: "feature_subclass_mastery1_name",
            description: "feature_subclass_mastery1_desc"
        }, {
            template: "feature",
            category: "Ancestry",
            button: "feature_ancestry0_chat_print",
            name: "feature_ancestry0_name",
            description: "feature_ancestry0_desc"
        }, {
            template: "feature",
            category: "Ancestry",
            button: "feature_ancestry1_chat_print",
            name: "feature_ancestry1_name",
            description: "feature_ancestry1_desc"
        }, {
            template: "feature",
            category: "Community",
            button: "feature_community_chat_print",
            name: "feature_community_name",
            description: "feature_community_desc"
        }
    ];

    const tabButtons = [
        {
            button: "button_domain_features",
            value: "domain-features"
        }, {
            button: "button_inventory",
            value: "inventory"
        }
    ];

    /* Listeners for each slot */
    slotToggles.forEach((pair) => {
        if (pair.type === "domain") {
            const prefix = "repeating_domain";
            on(`clicked:${prefix}:${pair.slot}`, function() {
                const toggle = `${prefix}_${pair.toggle}`;
                getAttrs([toggle], function (values) {
                    if(values[toggle] === "inactive")
                        setAttrs({[toggle]: "active"});
                    else
                        setAttrs({[toggle]: "inactive"});
                });
            });
        }
        else
            on(`clicked:${pair.slot}`, function() {
                getAttrs([pair.toggle], function(values) {
                    if(values[pair.toggle] === "inactive")
                        setAttrs({[pair.toggle]: "active"});
                    else
                        setAttrs({[pair.toggle]: "inactive"});
                });
            });
    });

    /* Listeners for each roll button */
    rollButtons.forEach((rollButton) => {
        on(`clicked:${rollButton.button}`, function() {
            if (rollButton.template === "duality") {
                getAttrs([rollButton.modifier], (values) => {
                    startRoll("!{{ask1=[[?{Advantage or Disadvantage?|None,0|Advantage,1|Disadvantage,-1}]]}} {{ask2=[[?{Modifier?|0}]]}}", (response) => {
                        const answer = response.results.ask1.result;
                        const mod = response.results.ask2.result;
                        if (answer === 0) { // Without Advantage or Disadvantage
                            startRoll(`&{template:duality} {{name=${rollButton.name}}} {{hopeDie=[[1d12]]}} {{fearDie=[[1d12]]}} `
                                + `{{result=[[0]]}} {{trait=[[${values[rollButton.modifier]}]]}} {{mod=[[${mod}]]}}`, (roll) => {
                                    const total = roll.results.hopeDie.result + roll.results.fearDie.result + Number(values[rollButton.modifier]) + mod;

                                    finishRoll(roll.rollId, {
                                        result: total
                                    });
                                });
                        } else if (answer === 1) { // With Advantage
                            startRoll(`&{template:duality} {{name=${rollButton.name}}} {{hopeDie=[[1d12]]}} {{fearDie=[[1d12]]}} `
                                + `{{result=[[0]]}} {{trait=[[${values[rollButton.modifier]}]]}} {{mod=[[${mod}]]}} {{adv=[[1d6]]}} {{withAdv=Advantage}}`, (roll) => {
                                    const total = roll.results.hopeDie.result + roll.results.fearDie.result + roll.results.adv.result + Number(values[rollButton.modifier]) + mod;

                                    finishRoll(roll.rollId, {
                                        result: total
                                    });
                                });
                        } else { // With Disadvantage
                            startRoll(`&{template:duality} {{name=${rollButton.name}}} {{hopeDie=[[1d12]]}} {{fearDie=[[1d12]]}} `
                                + `{{result=[[0]]}} {{trait=[[${values[rollButton.modifier]}]]}} {{mod=[[${mod}]]}} {{adv=[[1d6]]}} {{withAdv=Disadvantage}}`, (roll) => {
                                    const total = roll.results.hopeDie.result + roll.results.fearDie.result - roll.results.adv.result + Number(values[rollButton.modifier]) + mod;
                                    
                                    finishRoll(roll.rollId, {
                                        result: total
                                    });
                                });
                        }
                    });
                });
            } else {
                const name = `Weapon_${rollButton.toggle}_name`;
                const dieSize = `Weapon_${rollButton.toggle}_damage_dice`;
                const modifier = `Weapon_${rollButton.toggle}_damage_modifier`;
                const type = `Weapon_${rollButton.toggle}_damage_type`;
                getAttrs(["Proficiency", name, dieSize, modifier, type], (values) => {
                    startRoll(`&{template:damage} {{name=${values[name]}}} {{proficiency=${values.Proficiency}}} {{dieSize=${values[dieSize]}}} {{modifier=${values[modifier]}}}`
                    + `{{total=[[${values.Proficiency}${values[dieSize]} + ${values[modifier]}]]}} {{type=${values[type]}}}`, (roll) => {
                        finishRoll(roll.rollId);
                    });
                });
            }
        });
    });

    printButtons.forEach((printButton) => {
        if (printButton.template === "domain") {
            const prefix = "repeating_domain";
            on(`clicked:${prefix}:${printButton.button}`, function() {
                getAttrs([printButton.domain, printButton.level, printButton.name, printButton.description], (values) => {
                    const domainCapitalized = values[printButton.domain].charAt(0).toUpperCase() + values[printButton.domain].slice(1);
                    startRoll(`&{template:print-domain} {{name=${values[printButton.name]}}} {{level=${values[printButton.level]}}} {{domain=${domainCapitalized}}}`
                    + `{{description=${values[printButton.description]}}}`, (roll) => {
                        finishRoll(roll.rollId);
                    });
                });
            });
        } else { // Feature Chat Prints
            on(`clicked:${printButton.button}`, function() {
                getAttrs([printButton.name, printButton.description], (values) => {
                    startRoll(`&{template:print-feature} {{name=${values[printButton.name]}}} {{category=${printButton.category}}} {{description=${values[printButton.description]}}}`, (roll) => {
                        finishRoll(roll.rollId);
                    });
                });
            });
        }
    });

    tabButtons.forEach(button => {
        on(`clicked:${button.button}`, function() {
            setAttrs({
                sheet_tab: button.value
            });
        });
    });

    /* Resets all used toggles applicable for short rest */
    const shortRest = function() {
        const featureUsedToggles = [];
        const featureRefreshToggles = [];
        const featureNames = [];
        slotToggles.forEach((obj) => {
            if (obj.hasOwnProperty("refresh")) {
                featureUsedToggles.push(obj.toggle);
                featureRefreshToggles.push(obj.refresh);
                featureNames.push(obj.name);
            }
        });
        getSectionIDs("repeating_domain", ids => {
            const domainShortRestToggles = [];
            const domainUsedToggles = [];
            const domainNames = [];
            ids.forEach((id) => {
                domainShortRestToggles.push(`repeating_domain_${id}_domain_effect_shortrest_toggle`);
                domainUsedToggles.push(`repeating_domain_${id}_domain_effect_used_toggle`);
                domainNames.push(`repeating_domain_${id}_domain_effect_name`);
            });
            const allToggles = [...featureUsedToggles, ...featureRefreshToggles, ...featureNames, ...domainUsedToggles, ...domainShortRestToggles, ...domainNames];
            getAttrs(allToggles, function(values) {
                const needsToggled = [];
                var anyToggle = false;
                domainShortRestToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && values[domainUsedToggles[i]] === "active") {
                        needsToggled.push({
                            type: "domain",
                            name: values[domainNames[i]],
                            toggle: domainUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                featureUsedToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && (values[featureRefreshToggles[i]] === "short" || values[featureRefreshToggles[i]] === "rest")) {
                        needsToggled.push({
                            type: "feature",
                            name: values[featureNames[i]],
                            toggle: featureUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                const toggleString = needsToggled.map(obj => {
                    return `${obj.type.charAt(0).toUpperCase() + obj.type.slice(1)} - ${obj.name}`;
                }).join(", ");
                var confirmString = "";
                if (anyToggle)
                    confirmString = `!{{ask=[[?{The following actions will be reset: ${toggleString}|Cancel,0|Confirm,1}]]}}`;
                else
                    confirmString = `!{{ask=[[?{No actions will be reset|Cancel,0|Confirm,1}]]}}`;
                startRoll(confirmString, (response) => {
                    if (response.results.ask.result) {
                        const activeToggles = {};
                        needsToggled.forEach((toggle) => {
                            activeToggles[toggle.toggle] = "inactive";
                        });
                        setAttrs(activeToggles);
                    }
                });
            });
        });
    }

    /* Resets all used toggles applicable for long rest */
    const longRest = function() {
        const featureUsedToggles = [];
        const featureRefreshToggles = [];
        const featureNames = [];
        slotToggles.forEach((obj) => {
            if (obj.hasOwnProperty("refresh")) {
                featureUsedToggles.push(obj.toggle);
                featureRefreshToggles.push(obj.refresh);
                featureNames.push(obj.name);
            }
        });
        getSectionIDs("repeating_domain", ids => {
            const domainLongRestToggles = [];
            const domainUsedToggles = [];
            const domainNames = [];
            ids.forEach((id) => {
                domainLongRestToggles.push(`repeating_domain_${id}_domain_effect_longrest_toggle`);
                domainUsedToggles.push(`repeating_domain_${id}_domain_effect_used_toggle`);
                domainNames.push(`repeating_domain_${id}_domain_effect_name`);
            });
            const allToggles = [...featureUsedToggles, ...featureRefreshToggles, ...featureNames, ...domainUsedToggles, ...domainLongRestToggles, ...domainNames];
            getAttrs(allToggles, function(values) {
                const needsToggled = [];
                var anyToggle = false;
                domainLongRestToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && values[domainUsedToggles[i]] === "active") {
                        needsToggled.push({
                            type: "domain",
                            name: values[domainNames[i]],
                            toggle: domainUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                featureUsedToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && (values[featureRefreshToggles[i]] === "long" || values[featureRefreshToggles[i]] === "rest")) {
                        needsToggled.push({
                            type: "feature",
                            name: values[featureNames[i]],
                            toggle: featureUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                const toggleString = needsToggled.map(obj => {
                    return `${obj.type.charAt(0).toUpperCase() + obj.type.slice(1)} - ${obj.name}`;
                }).join(", ");
                var confirmString = "";
                if (anyToggle)
                    confirmString = `!{{ask=[[?{The following actions will be reset: ${toggleString}|Cancel,0|Confirm,1}]]}}`;
                else
                    confirmString = `!{{ask=[[?{No actions will be reset|Cancel,0|Confirm,1}]]}}`;
                startRoll(confirmString, (response) => {
                    if (response.results.ask.result) {
                        const activeToggles = {};
                        needsToggled.forEach((toggle) => {
                            activeToggles[toggle.toggle] = "inactive";
                        });
                        setAttrs(activeToggles);
                    }
                });
            });
        });
    }

    /* Resets all used toggles applicable for session reset */
    const sessionReset = function() {
        const featureUsedToggles = [];
        const featureRefreshToggles = [];
        const featureNames = [];
        slotToggles.forEach((obj) => {
            if (obj.hasOwnProperty("refresh")) {
                featureUsedToggles.push(obj.toggle);
                featureRefreshToggles.push(obj.refresh);
                featureNames.push(obj.name);
            }
        });
        getSectionIDs("repeating_domain", ids => {
            const domainSessionResetToggles = [];
            const domainUsedToggles = [];
            const domainNames = [];
            ids.forEach((id) => {
                domainSessionResetToggles.push(`repeating_domain_${id}_domain_effect_session_toggle`);
                domainUsedToggles.push(`repeating_domain_${id}_domain_effect_used_toggle`);
                domainNames.push(`repeating_domain_${id}_domain_effect_name`);
            });
            const allToggles = [...featureUsedToggles, ...featureRefreshToggles, ...featureNames, ...domainUsedToggles, ...domainSessionResetToggles, ...domainNames];
            getAttrs(allToggles, function(values) {
                const needsToggled = [];
                var anyToggle = false;
                domainSessionResetToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && values[domainUsedToggles[i]] === "active") {
                        needsToggled.push({
                            type: "domain",
                            name: values[domainNames[i]],
                            toggle: domainUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                featureUsedToggles.forEach((toggle, i) => {
                    if (values[toggle] === "active" && values[featureRefreshToggles[i]] === "session") {
                        needsToggled.push({
                            type: "feature",
                            name: values[featureNames[i]],
                            toggle: featureUsedToggles[i]
                        });
                        anyToggle = true;
                    }
                });
                const toggleString = needsToggled.map(obj => {
                    return `${obj.type.charAt(0).toUpperCase() + obj.type.slice(1)} - ${obj.name}`;
                }).join(", ");
                var confirmString = "";
                if (anyToggle)
                    confirmString = `!{{ask=[[?{The following actions will be reset: ${toggleString}|Cancel,0|Confirm,1}]]}}`;
                else
                    confirmString = `!{{ask=[[?{No actions will be reset|Cancel,0|Confirm,1}]]}}`;
                startRoll(confirmString, (response) => {
                    if (response.results.ask.result) {
                        const activeToggles = {};
                        needsToggled.forEach((toggle) => {
                            activeToggles[toggle.toggle] = "inactive";
                        });
                        setAttrs(activeToggles);
                    }
                });
            });
        });
    }

    /* Populates Ancestry Features when Ancestry is selected */
    const populateAncestryFeatures = function(ancestry) {
        var ancestryFeatures = {};
        switch (ancestry) {
            case "clank":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Purposeful Design",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Decide who made you and for what purpose. At "
                        + "character creation, choose one of your Experiences that best aligns "
                        + "with this purpose and gain a permanent +1 bonus to it.",
                    Feature_ancestry1_name: "Efficient",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you take a short rest, you can choose a long "
                        + "rest move instead of a short rest move."
                }
                break;
            case "drakona":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Scales",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Your scales act as natural protection. When you "
                        + "would take Severe damage, you can mark a Stress to mark 1 fewer Hit "
                        + "Points.",
                    Feature_ancestry1_name: "Elemental Breath",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Choose an element for your breath (such as "
                        + "electricity, fire, or ice). You can use this breath against a target or "
                        + "group of targets within Very Close range, treating it as an Instinct "
                        + "weapon that deals d8 magic damage using your Proficiency."
                }
                break;
            case "dwarf":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Thick Skin",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you take Minor damage, you can mark 2 Stress "
                        + "instead of marking a Hit Point.",
                    Feature_ancestry1_name: "Increased Fortitude",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Spend 3 Hope to halve incoming physical damage."
                }
                break;
            case "elf":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Quick Reactions",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Mark a Stress to gain advantage on a reaction roll.",
                    Feature_ancestry1_name: "Celestial Trance",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "During a rest, you can drop into a trance to choose "
                        + "an additional downtime move."
                }
                break;
            case "faerie":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Luckbender",
                    Feature_ancestry0_used_toggle: "inactive",
                    Feature_ancestry0_used_refresh: "session",
                    Feature_ancestry0_desc: "Once per session, after you or a willing ally within "
                        + "Close range makes an action roll, you can spend 3 Hope to reroll the "
                        + "Duality Dice.",
                    Feature_ancestry1_name: "Wings",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You can fly. While flying, you can mark a Stress "
                        + "after an adversary makes an attack against you to gain a +2 bonus to "
                        + "your Evasion against that attack."
                }
                break;
            case "faun":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Caprine Leap",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You can leap anywhere within Close range as though "
                        + "you were using normal movement, allowing you to vault obstacles, jump "
                        + "across gaps, or scale barriers with ease.",
                    Feature_ancestry1_name: "Kick",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you succeed on an attack against a target "
                        + "within Melee range, you can mark a Stress to kick yourself off them, "
                        + "dealing an extra 2d6 damage and knocking back either yourself or the "
                        + "target to Very Close range."
                }
                break;
            case "firbolg":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Charge",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you succeed on an Agility Roll to move from Far "
                        + "or Very Far range into Melee range with one or more targets, you can "
                        + "mark a Stress to deal 1d12 physical damage to all targets within Melee "
                        + "range.",
                    Feature_ancestry1_name: "Unshakable",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you would mark a Stress, roll a d6. On a result "
                        + "of 6, don't mark it."
                }
                break;
            case "fungril":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Fungril Network",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Make an Instinct Roll (12) to use your mycelial "
                        + "array to speak with others of your ancestry. On a success, you can "
                        + "communicate across any distance.",
                    Feature_ancestry1_name: "Death Connection",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "While touching a corpse that died recently, you can "
                        + "mark a Stress to extract one memory from the corpse related to a "
                        + "specific emotion or sensation of your choice."
                }
                break;
            case "galapa":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Shell",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain a bonus to your damage thresholds equal to your "
                        + "Proficiency.",
                    Feature_ancestry1_name: "Retract",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Mark a Stress to retract into your shell. While in "
                        + "your shell, you have resistance to physical damage, you have "
                        + " disadvantage on action rolls, and you can't move."
                }
                break;
            case "giant":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Endurance",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain an additional Hit Point slot at character "
                        + "creation.",
                    Feature_ancestry1_name: "Reach",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Treat any weapon, ability, spell, or other feature "
                        + "that has a Melee range as though it has a Very Close range instead."
                }
                break;
            case "goblin":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Surefooted",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You ignore disadvantage on Agility Rolls.",
                    Feature_ancestry1_name: "Danger Sense",
                    Feature_ancestry1_used_toggle: "inactive",
                    Feature_ancestry1_used_refresh: "rest",
                    Feature_ancestry1_desc: "Once per rest, mark a Stress to force an adversary "
                        + "to reroll an attack against you or an ally within Very Close range."
                }
                break;
            case "halfling":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Luckbringer",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "At the start of each session, everyone in your party "
                        + "gains a Hope.",
                    Feature_ancestry1_name: "Internal Compass",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you roll a 1 on your Hope Die, you can reroll "
                        + "it."
                }
                break;
            case "human":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "High Stamina",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain an additional Stress slot at character creation.",
                    Feature_ancestry1_name: "Adaptability",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you fail a roll that utilized one of your "
                        + "Experiences, you can mark a Stress to reroll."
                }
                break;
            case "infernis":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Fearless",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you roll with Fear, you can mark 2 Stress to "
                        + "change it into a roll with Hope instead.",
                    Feature_ancestry1_name: "Dread Visage",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You have advantage on rolls to intimidate hostile "
                        + "creatures."
                }
                break;
            case "katari":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Feline Instincts",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you make an Agility Roll, you can spend 2 Hope "
                        + "to reroll your Hope Die.",
                    Feature_ancestry1_name: "Retracting Claws",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Make an Agility Roll to scratch a target within "
                        + "Melee range. On a success, they become temporarily Vulnerable."
                }
                break;
            case "orc":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Sturdy",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you have 1 Hit Point remaining, attacks against "
                        + "you have disadvantage.",
                    Feature_ancestry1_name: "Tusks",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you succeed on an attack against a target "
                        + "within Melee range, you can spend a Hope to gore the target with your "
                        + "tusks, dealing an extra 1d6 damage."
                }
                break;
            case "ribbet":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Amphibious",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You can breathe and move naturally underwater.",
                    Feature_ancestry1_name: "Long Tongue",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You can use your long tongue to grab onto things "
                        + "within Close range. Mark a Stress to use your tongue as a Finesse Close "
                        + "weapon that deals d12 physical damage using your Proficiency."
                }
                break;
            case "simiah":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "Natural Climber",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You have advantage on Agility Rolls that involve "
                        + "balancing and climbing.",
                    Feature_ancestry1_name: "Nimble",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Gain a permanent +1 bonus to your Evasion at "
                        + "character creation."
                }
                break;
            case "mixed":
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "shown",
                    Feature_ancestry0_name: "",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "",
                    Feature_ancestry1_name: "",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry1_desc: "",
                    Feature_ancestry_mixed0: "",
                    Feature_ancestry_mixed1: ""
                }
                break;
            default:
                ancestryFeatures = {
                    Feature_ancestry_mixed_toggle: "hidden",
                    Feature_ancestry0_name: "",
                    Feature_ancestry0_used_toggle: "inactive",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "",
                    Feature_ancestry1_name: "",
                    Feature_ancestry1_used_toggle: "inactive",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry1_desc: ""
                }
        }
        setAttrs(ancestryFeatures);
    }

    /* Populates Community Features when Community is selected */
    const populateCommunityFeatures = function(community) {
        var communityFeatures = {};
        switch (community) {
            case "highborne":
                communityFeatures = {
                    Feature_community_name: "Privilege",
                    Feature_community_desc: "You have advantage on rolls to consort with nobles, "
                        + "negotiate prices, or leverage your reputation to get what you want.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "loreborne":
                communityFeatures = {
                    Feature_community_name: "Well-Read",
                    Feature_community_desc: "You have advantage on rolls that involve the history, "
                        + "culture, or politics of a prominent person or place.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "orderborne":
                communityFeatures = {
                    Feature_community_name: "Dedicated",
                    Feature_community_desc: "Record three sayings or values your upbringing "
                        + "instilled in you. Once per rest, when you describe how you're embodying "
                        + "one of these principles through your current action, you can roll a d20 "
                        + "as your Hope Die.",
                    Feature_community_used_toggle: "inactive",
                    Feature_community_used_refresh: "rest",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "ridgeborne":
                communityFeatures = {
                    Feature_community_name: "Steady",
                    Feature_community_desc: "You have advantage on rolls to traverse dangerous "
                        + "cliffs and ledges, navigate harsh environments, and use your survival "
                        + "knowledge.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "seaborne":
                communityFeatures = {
                    Feature_community_name: "Know the Tide",
                    Feature_community_desc: "You can sense the ebb and flow of life. When you roll "
                        + "with Fear, place a token on your community card. You can hold a number "
                        + "of tokens equal to your level. Before you make an action roll, you can "
                        + "spend any number of these tokens to gain a +1 bonus to the roll for "
                        + "each token spent. At the end of each session, clear all unspent tokens.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "shown"
                }
                break;
            case "slyborne":
                communityFeatures = {
                    Feature_community_name: "Scoundrel",
                    Feature_community_desc: "You have advantage on rolls to negotiate with "
                        + "criminals, detect lies, or find a safe place to hide.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "underborne":
                communityFeatures = {
                    Feature_community_name: "Low-Light Living",
                    Feature_community_desc: "When you're in an area with low light or heavy "
                        + "shadow, you have advantage on rolls to hide, investigate, or perceive "
                        + "details within that area.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "wanderborne":
                communityFeatures = {
                    Feature_community_name: "Nomadic Pack",
                    Feature_community_desc: "Add a Nomadic Pack to your inventory. Once per "
                        + "session, you can spend a Hope to reach into this pack and pull out a "
                        + "mundane item that's useful to your situation. Work with the GM to "
                        + "figure out what item you take out.",
                    Feature_community_used_toggle: "inactive",
                    Feature_community_used_refresh: "session",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            case "wildborne":
                communityFeatures = {
                    Feature_community_name: "Lightfoot",
                    Feature_community_desc: "Your movement is naturally silent. You have advantage "
                        + "on rolls to move without being heard.",
                    Feature_community_used_toggle: "hidden",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "hidden"
                }
                break;
            default:
                communityFeatures = {
                    Feature_community_name: "",
                    Feature_community_desc: "",
                    Feature_community_used_toggle: "inactive",
                    Feature_community_used_refresh: "never",
                    Feature_community_tokens_toggle: "shown"
                }
        }
        setAttrs(communityFeatures);
    }

    /* Populates the Resources inputs with default values when class is selected */
    const populateDefaultResources = function(charClass) {
        var attrsToSet = {};
        switch (charClass) {
            case "bard":
                attrsToSet = {
                    Evasion: 10,
                    Hpmax: 5,
                    Stressmax: 6
                };
                break;
            case "druid":
                attrsToSet = {
                    Evasion: 10,
                    Hpmax: 6,
                    Stressmax: 6
                };
                break;
            case "guardian":
                attrsToSet = {
                    Evasion: 9,
                    Hpmax: 7,
                    Stressmax: 6
                };
                break;
            case "ranger":
                attrsToSet = {
                    Evasion: 12,
                    Hpmax: 6,
                    Stressmax: 6
                };
                break;
            case "rogue":
                attrsToSet = {
                    Evasion: 12,
                    Hpmax: 6,
                    Stressmax: 6
                };
                break;
            case "seraph":
                attrsToSet = {
                    Evasion: 9,
                    Hpmax: 7,
                    Stressmax: 6
                };
                break;
            case "sorcerer":
                attrsToSet = {
                    Evasion: 10,
                    Hpmax: 6,
                    Stressmax: 6
                };
                break;
            case "warrior":
                attrsToSet = {
                    Evasion: 11,
                    Hpmax: 6,
                    Stressmax: 6
                };
                break;
            case "wizard":
                attrsToSet = {
                    Evasion: 11,
                    Hpmax: 5,
                    Stressmax: 6
                };
                break;
            default:
                attrsToSet = {
                    Evasion: 10,
                    Hpmax: 6,
                    Stressmax: 6
                };
        }
        setAttrs(attrsToSet);
    }

    /* Sets the Unique Feature's name and description when a class is selected. */
    const populateUniqueFeature = function(charClass) {
        var uniqueFeature = {};
        switch (charClass) {
            case "bard":
                uniqueFeature = {
                    Feature_unique_name: "Make a Scene",
                    Feature_unique_desc: "Spend 3 Hope to temporarily Distract a target within "
                        + "Close range, giving them a -2 penalty to their Difficulty."
                };
                break;
            case "druid":
                uniqueFeature = {
                    Feature_unique_name: "Evolution",
                    Feature_unique_desc: "Spend 3 Hope to transform into a Beastform without "
                        + "marking a Stress. When you do, choose one trait to raise by +1 until "
                        + "you drop out of that Beastform."
                };
                break;
            case "guardian":
                uniqueFeature = {
                    Feature_unique_name: "Frontline Tank",
                    Feature_unique_desc: "Spend 3 Hope to clear 2 Armor Slots."
                };
                break;
            case "ranger":
                uniqueFeature = {
                    Feature_unique_name: "Hold Them Off",
                    Feature_unique_desc: "Spend 3 Hope when you succeed on an attack with a weapon "
                        + "to use that same roll against two additional adversaries within range "
                        + "of the attack."
                };
                break;
            case "rogue":
                uniqueFeature = {
                    Feature_unique_name: "Rogue's Dodge",
                    Feature_unique_desc: "Spend 3 Hope to gain a +2 bonus to your Evasion until "
                        + "the next time an attack succeeds against you. Otherwise, this bonus "
                        + "lasts until your next rest."
                };
                break;
            case "seraph":
                uniqueFeature = {
                    Feature_unique_name: "Life Support",
                    Feature_unique_desc: "Spend 3 Hope to clear a Hit Point on an ally within "
                        + "Close range."
                };
                break;
            case "sorcerer":
                uniqueFeature = {
                    Feature_unique_name: "Volatile Magic",
                    Feature_unique_desc: "Spend 3 Hope to reroll any number of your damage dice "
                        + "on an attack that deals magic damage."
                };
                break;
            case "warrior":
                uniqueFeature = {
                    Feature_unique_name: "No Mercy",
                    Feature_unique_desc: "Spend 3 Hope to gain a +1 bonus to your attack rolls "
                        + "until your next rest."
                };
                break;
            case "wizard":
                uniqueFeature = {
                    Feature_unique_name: "Not This Time",
                    Feature_unique_desc: "Spend 3 Hope to force an adversary within Far range "
                        + "to reroll an attack or damage roll."
                };
                break;
            default: 
                uniqueFeature = {
                    Feature_unique_name: "",
                    Feature_unique_desc: ""
                };
        }
        setAttrs(uniqueFeature);
    }

    /* Sets the Class Features' names, descriptions, feature-toggles, used-toggles, and tokens-toggles
        when a class is selected. */
    const populateClassFeatures = function(charClass) {
        var classFeatures = {};
        switch (charClass) {
            case "bard":
                classFeatures = {
                    Feature_class0_name: "Rally",
                    Feature_class0_desc: "Once per session, describe how you rally the party "
                        + "and give yourself and each of your allies a Rally Die. At level 1, your "
                        + "Rally Die is a d6. A PC can spend their Rally Die to roll it, adding the "
                        + "result to their action roll, reaction roll, damage roll, or to clear a "
                        + "number of Stress equal to the result. At the end of each session, clear all "
                        + "unspent Rally Dice. At level 5, your Rally Die increases to a d8.",
                    Feature_class0_used_toggle: "inactive",
                    Feature_class0_used_refresh: "session",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "druid":
                classFeatures = {
                    Feature_class0_name: "Beastform",
                    Feature_class0_desc: "Mark a Stress to magically transform into a creature of "
                        + "your tier or lower from the Beastform list. You can drop out of this form "
                        + "at any time. While transformed, you can't use weapons or cast spells from "
                        + "domain cards, but you can still use other features or abilities you have "
                        + "access to. Spells you cast before you transform stay active and last for "
                        + "their normal duration, and you can talk and communicate as normal. "
                        + "Additionally, you gain the Beastform's features, add their Evasion bonus to "
                        + "your Evasion, and use the trait specified in their statistics for your "
                        + "attack. While you're in a Beastform, your armor becomes part of your body "
                        + "and you mark Armor Slots as usual; when you drop out of a Beastform, those "
                        + "marked Armor Slots remain marked. If you mark your last Hit Point, you "
                        + "automatically drop out of this form.",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "Wildtouch",
                    Feature_class1_desc: "You can perform harmless, subtle effects that involve "
                        + "nature— such as causing a flower to rapidly grow, summoning a slight "
                        + "gust of wind, or starting a campfire— at will.",
                    Feature_class1_used_toggle: "hidden",
                    Feature_class1_tokens_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "guardian":
                classFeatures = {
                    Feature_class0_name: "Unstoppable",
                    Feature_class0_desc: "Once per long rest, you can become Unstoppable. You "
                        + "gain an Unstoppable Die. At level 1, your Unstoppable Die is a d4. "
                        + "After you make a damage roll that deals 1 or more Hit Points to a "
                        + "target, increase the Unstoppable Die value by one. When the die's value "
                        + "would exceed its maximum value or when the scene ends, remove the die "
                        + "and drop out of Unstoppable. At level 5, your Unstoppable Die increases "
                        + "to a d6."
                        + "\n\n"
                        + "While Unstoppable, you gain the following benefits:\n"
                        + "• You reduce the severity of physical damage by one threshold.\n"
                        + "• You add the current value of the Unstoppable Die to your damage roll.\n"
                        + "• You can't be Restrained or Vulnerable.",
                    Feature_class0_used_toggle: "inactive",
                    Feature_class0_used_refresh: "long",
                    Feature_class0_tokens_toggle: "shown",
                    Feature_class1_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "ranger":
                classFeatures = {
                    Feature_class0_name: "Ranger's Focus",
                    Feature_class0_desc: "Spend a Hope and make an attack against a target. On a "
                    + "success, deal your attack's normal damage and temporarily make the attack's "
                    + "target your Focus. Until this feature ends or you make a different creature "
                    + "your Focus, you gain the following benefits against your Focus: \n"
                    + "• You know precisely what direction they are in.\n"
                    + "• When you deal damage to them, they must mark a Stress.\n"
                    + "• When you fail an attack against them, you can end your Ranger's Focus "
                    + "feature to reroll your Duality Dice.",
                    Feature_class0_used_toggle: "inactive",
                    Feature_class0_used_refresh: "never",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "rogue":
                classFeatures = {
                    Feature_class0_name: "Cloaked",
                    Feature_class0_desc: "Any time you would be Hidden, you are instead Cloaked. "
                        + "In addition to the benefits of the Hidden condition, while Cloaked you "
                        + "remain unseen if you are stationary when an adversary moves to where "
                        + "they would normally see you. After you make an attack or end a move "
                        + "within line of sight of an adversary, you are no longer Cloaked.",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "Sneak Attack",
                    Feature_class1_desc: "When you succeed on an attack while Cloaked or while an "
                        + "ally is within Melee range of your target, add a number of d6s equal to "
                        + "your tier to your damage roll.",
                    Feature_class1_used_toggle: "hidden",
                    Feature_class1_tokens_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "seraph":
                classFeatures = {
                    Feature_class0_name: "Prayer Dice",
                    Feature_class0_desc: "At the beginning of each session, roll a number of d4s "
                        + "equal to your subclass's Spellcast trait. These are your Prayer Dice. You "
                        + "can spend any number of Prayer Dice to aid yourself or an ally within "
                        + "Far range. You can use a spent die's value to reduce incoming damage, "
                        + "add to a roll's result after the roll is made, or gain Hope equal to "
                        + "the result. At the end of each session, clear all unspent Prayer Dice.",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "shown",
                    Feature_class1_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "sorcerer":
                classFeatures = {
                    Feature_class0_name: "Arcane Sense",
                    Feature_class0_desc: "You can sense the presence of magical people and "
                        + "objects within Close range.",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "Minor Illusion",
                    Feature_class1_desc: "Make a Spellcast Roll (10). On a success, you create "
                        + "a minor visual illusion no larger than yourself within Close range. "
                        + "This illusion is convincing to anyone at Close range or farther.",
                    Feature_class1_used_toggle: "hidden",
                    Feature_class1_tokens_toggle: "hidden",
                    Feature_class2_toggle: "shown",
                    Feature_class2_name: "Channel Raw Power",
                    Feature_class2_desc: "Once per long rest, you can place a domain card from "
                        + "your loadout into your vault and choose to either:\n"
                        + "• Gain Hope equal to the level of the card.\n"
                        + "• Enhance a spell that deals damage, gaining a bonus to your damage "
                        + "roll equal to twice the level of the card.",
                    Feature_class2_used_toggle: "inactive",
                    Feature_class2_used_refresh: "long",
                    Feature_class2_tokens_toggle: "hidden"
                };
                break;
            case "warrior":
                classFeatures = {
                    Feature_class0_name: "Attack of Opportunity",
                    Feature_class0_desc: "If an adversary within Melee range attempts to leave "
                        + "that range, make a reaction roll using a trait of your choice against "
                        + "their Difficulty. Choose one effect on a success, or two if you "
                        + "critically succeed:\n"
                        + "• They can't move from where they are.\n"
                        + "• You deal damage to them equal to your primary• weapon's damage.\n"
                        + "• You move with them",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "Combat Training",
                    Feature_class1_desc: "You ignore burden when equipping weapons. When you deal "
                        + "physical damage, you gain a bonus to your damage roll equal to your "
                        + "level.",
                    Feature_class1_used_toggle: "hidden",
                    Feature_class1_tokens_toggle: "hidden",
                    Feature_class2_toggle: "hidden"
                };
                break;
            case "wizard":
                classFeatures = {
                    Feature_class0_name: "Prestidigitation",
                    Feature_class0_desc: "You can perform harmless, subtle magical effects at "
                        + "will. For example, you can change an object's color, create a smell, "
                        + "light a candle, cause a tiny object to float, illuminate a room, or "
                        + "repair a small object.",
                    Feature_class0_used_toggle: "hidden",
                    Feature_class0_tokens_toggle: "hidden",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "Strange Patterns",
                    Feature_class1_desc: "Choose a number between 1 and 12. When you roll that "
                        + "number on a Duality Die, gain a Hope or clear a Stress. You can change "
                        + "this number when you take a long rest",
                    Feature_class1_used_toggle: "hidden",
                    Feature_class1_tokens_toggle: "shown",
                    Feature_class2_toggle: "hidden"
                };
                break;
            default:
                classFeatures = {
                    Feature_class0_name: "",
                    Feature_class0_desc: "",
                    Feature_class0_used_toggle: "inactive",
                    Feature_class0_used_refresh: "never",
                    Feature_class0_tokens_toggle: "shown",
                    Feature_class1_toggle: "shown",
                    Feature_class1_name: "",
                    Feature_class1_desc: "",
                    Feature_class1_used_toggle: "inactive",
                    Feature_class1_used_refresh: "never",
                    Feature_class1_tokens_toggle: "shown",
                    Feature_class2_toggle: "hidden"
                };
        }
        if (classFeatures.Feature_class0_used_toggle === "hidden")
            classFeatures["Feature_class0_used_refresh"] = "never";
        if (classFeatures.Feature_class1_used_toggle === "hidden" || classFeatures.Feature_class1_toggle === "hidden")
            classFeatures["Feature_class1_used_refresh"] = "never";
        if (classFeatures.Feature_class2_used_toggle === "hidden" || classFeatures.Feature_class2_toggle === "hidden")
            classFeatures["Feature_class2_used_refresh"] = "never";
        setAttrs(classFeatures);
    }

    /* Sets Proficiency based on Level input */
    const setProficiency = function(level) {
        var prof = {};
        switch (true) {
            case (level == 1):
                prof = {
                    Proficiency: 1
                };
                break;
            case (level < 5):
                prof = {
                    Proficiency: 2
                };
                break;
            case (level < 8):
                prof = {
                    Proficiency: 3
                };
                break;
            case (level < 11):
                prof = {
                    Proficiency: 4
                };
                break;
        }
        setAttrs(prof);
    }

    /* Populates the subclass features when subclass changes */
    const populateSubclassFeatures = function(subclass) {
        var subclassFeatures = {};
        switch (subclass) {
            case "0": // Bard - Troubadour
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Presence",
                    Feature_subclass_foundation0_name: "Gifted Performer",
                    Feature_subclass_foundation0_desc: "You can play three different types of songs, once "
                        + "each per long rest; describe how you perform for others to gain the "
                        + "listed benefit:\n"
                        + "• Relaxing Song: You and all allies within Close range clear a Hit "
                        + "Point.\n"
                        + "• Epic Song: Make a target within Close range temporarily Vulnerable.\n"
                        + "• Heartbreaking Song: You and all allies within Close range gain a "
                        + "Hope.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Maestro",
                    Feature_subclass_specialization0_desc: "Your rallying songs steel the courage of those "
                        + "who listen. When you give a Rally Die to an ally, they can gain a Hope "
                        + "or clear a Stress.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Virtuoso",
                    Feature_subclass_mastery0_desc: "You are among the greatest of your craft and your "
                        + "skill is boundless. You can perform each of your 'Gifted Performer' "
                        + "feature's songs twice per long rest.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "1": // Bard - Wordsmith
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Presence",
                    Feature_subclass_foundation0_name: "Rousing Speech",
                    Feature_subclass_foundation0_desc: "Once per long rest, you can give a heartfelt, "
                        + "inspiring speech. All allies within Far range clear 2 Stress.",
                    Feature_subclass_foundation0_used_toggle: "inactive",
                    Feature_subclass_foundation0_used_refresh: "long",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Heart of a Poet",
                    Feature_subclass_foundation1_desc: "After you make an action roll to impress, persuade, "
                        + "or offend someone, you can spend a Hope to add a d4 to the roll.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Eloquent",
                    Feature_subclass_specialization0_desc: "Your moving words boost morale. Once per "
                        + "session, when you encourage an ally, you can do one of the following:\n"
                        + "• Allow them to find a mundane object or tool they need.\n"
                        + "• Help an Ally without spending Hope.\n"
                        + "• Give them an additional downtime move during their next rest.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "session",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Epic Poetry",
                    Feature_subclass_mastery0_desc: "Your Rally Die increases to a d10. Additionally, when "
                        + "you Help an Ally, you can narrate the moment as if you were writing the "
                        + "tale of their heroism in a memoir. When you do, roll a d10 as your "
                        + "advantage die.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "2": // Druid - Warden of the Elements
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_subclass_foundation0_name: "Elemental Incarnation",
                    Feature_subclass_foundation0_desc: "Mark a Stress to Channel one of the following "
                        + "elements until you take Severe damage or until your next rest:\n"
                        + "• Fire: When an adversary within Melee range deals damage to you, they "
                        + "take 1d10 magic damage.\n"
                        + "• Earth: Gain a bonus to your damage thresholds equal to your "
                        + "Proficiency.\n"
                        + "• Water: When you deal damage to an adversary within Melee range, all "
                        + "other adversaries within Very Close range must mark a Stress.\n"
                        + "• Air: You can hover, gaining advantage on Agility Rolls.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Elemental Aura",
                    Feature_subclass_specialization0_desc: "Once per rest while Channeling, you can assume "
                        + "an aura matching your element. The aura affects targets within Close "
                        + "range until your Channeling ends.\n"
                        + "• Fire: When an adversary marks 1 or more Hit Points, they must also "
                        + "mark a Stress.\n"
                        + "• Earth: Your allies gain a +1 bonus to Strength.\n"
                        + "• Water: When an adversary deals damage to you, you can mark a Stress "
                        + "to move them anywhere within Very Close range of where they are.\n"
                        + "• Air: When you or an ally takes damage from an attack beyond Melee "
                        + "range, reduce the damage by 1d8.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "rest",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Elemental Dominion",
                    Feature_subclass_mastery0_desc: "You further embody your element. While Channeling, you "
                        + "gain the following benefit:\n"
                        + "• Fire: You gain a +1 bonus to your Proficiency for attacks and spells "
                        + "that deal damage.\n"
                        + "• Earth: When you would mark Hit Points, roll a d6 per Hit Point "
                        + "marked. For each result of 6, reduce the number of Hit Points you mark "
                        + "by 1.\n"
                        + "• Water: When an attack against you succeeds, you can mark a Stress to "
                        + "make the attacker temporarily Vulnerable.\n"
                        + "• Air: You gain a +1 bonus to your Evasion and can fly.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "3": // Druid - Warden of Renewal
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_subclass_foundation0_name: "Clarity of Nature",
                    Feature_subclass_foundation0_desc: "Once per long rest, you can create a space of "
                        + "natural serenity within Close range. When you spend a few minutes "
                        + "resting within the space, clear Stress equal to your Instinct, "
                        + "distributed as you choose between you and your allies.",
                    Feature_subclass_foundation0_used_toggle: "inactive",
                    Feature_subclass_foundation0_used_refresh: "long",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Regeneration",
                    Feature_subclass_foundation1_desc: "Touch a creature and spend 3 Hope. That creature "
                        + "clears 1d4 Hit Points.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Regenerative Reach",
                    Feature_subclass_specialization0_desc: "You can target creatures within Very Close "
                        + "range with your 'Regeneration' feature.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Warden's Protection",
                    Feature_subclass_specialization1_desc: "Once per long rest, spend 2 Hope to clear 2 Hit "
                        + "Points on 1d4 allies within Close range.",
                    Feature_subclass_specialization1_used_toggle: "inactive",
                    Feature_subclass_specialization1_used_refresh: "long",
                    Feature_subclass_mastery0_name: "Defender",
                    Feature_subclass_mastery0_desc: "Your animal transformation embodies a healing guardian "
                        + "spirit. When you're in Beastform and an ally within Close range marks 2 "
                        + "or more Hit Points, you can mark a Stress to reduce the number of Hit "
                        + "Points they mark by 1.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "4": // Guardian - Stalwart
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_subclass_foundation0_name: "Unwavering",
                    Feature_subclass_foundation0_desc: "Gain a permanent +1 bonus to your damage thresholds.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Iron Will",
                    Feature_subclass_foundation1_desc: "When you take physical damage, you can mark an "
                        + "additional Armor Slot to reduce the severity.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Unrelenting",
                    Feature_subclass_specialization0_desc: "Gain a permanent +2 bonus to your damage "
                        + "thresholds.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Partners-in-Arms",
                    Feature_subclass_specialization1_desc: "When an ally within Very Close range takes "
                        + "damage, you can mark an Armor Slot to reduce the severity by one "
                        + "threshold.",
                    Feature_subclass_specialization1_used_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Undaunted",
                    Feature_subclass_mastery0_desc: "Gain a permanent +3 bonus to your damage thresholds.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Loyal Protector",
                    Feature_subclass_mastery1_desc: "When an ally within Close range has 2 or fewer Hit "
                        + "Points and would take damage, you can mark a Stress to sprint to their "
                        + "side and take the damage instead.",
                    Feature_subclass_mastery1_used_toggle: "hidden"
                }
                break;
            case "5": // Guardian - Vengeance
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_subclass_foundation0_name: "At Ease",
                    Feature_subclass_foundation0_desc: "Gain an additional stress slot.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Revenge",
                    Feature_subclass_foundation1_desc: "When an adversary within Melee range succeeds on an "
                        + "attack against you, you can mark 2 Stress to force the attacker to mark "
                        + "a Hit Point.",
                    Feature_subclass_specialization0_name: "Act of Reprisal",
                    Feature_subclass_specialization0_desc: "When an adversary damages an ally within Melee "
                        + "range, you gain a +1 bonus to your Proficiency for the next successful "
                        + "attack you make against that adversary.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Nemesis",
                    Feature_subclass_mastery0_desc: "Spend 2 Hope to Prioritize an adversary until your "
                        + "next rest. When you make an attack against your Prioritized adversary, "
                        + "you can swap the results of your Hope and Fear Dice. You can only "
                        + "Prioritize one adversary at a time.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "6": // Ranger - Beastbound
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Agility",
                    Feature_subclass_foundation0_name: "Companion",
                    Feature_subclass_foundation0_desc: "You have an animal companion of your choice (at the "
                        + "GM's discretion). They stay by your side unless you tell them "
                        + "otherwise. Take the Ranger Companion sheet. When you level up your "
                        + " character, choose a level-up option for your companion from this sheet "
                        + "as well.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Expert Training",
                    Feature_subclass_specialization0_desc: "Choose an additional level-up option for your "
                        + "companion.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Battle-Bonded",
                    Feature_subclass_specialization1_desc: "When an adversary attacks you while they're "
                        + "within your companion's Melee range, you gain a +2 bonus to your "
                        + "Evasion against the attack.",
                    Feature_subclass_specialization1_used_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Advanced Training",
                    Feature_subclass_mastery0_desc: "Choose two additional level-up options for your "
                        + "companion.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Loyal Friend",
                    Feature_subclass_mastery1_desc: "Once per long rest, when the damage from an attack "
                        + "would mark your companion's last Stress or your last Hit Point and "
                        + "you're within Close range of each other, you or your companion can rush "
                        + "to the other's side and take that damage instead.",
                    Feature_subclass_mastery1_used_toggle: "inactive",
                    Feature_subclass_mastery1_used_refresh: "long"
                }
                break;
            case "7": // Ranger - Wayfinder
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Agility",
                    Feature_subclass_foundation0_name: "Ruthless Predator",
                    Feature_subclass_foundation0_desc: "When you make a damage roll, you can mark a Stress "
                        + "to gain a +1 bonus to your Proficiency. Additionally, when you deal "
                        + "Severe damage to an adversary, they must mark a Stress.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Path Forward",
                    Feature_subclass_foundation1_desc: "When you're traveling to a place you've previously "
                        + "visited or you carry an object that has been at the location before, "
                        + "you can identify the shortest, most direct path to your destination.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Elusive Predator",
                    Feature_subclass_specialization0_desc: "When your Focus makes an attack against you, "
                        + "you gain a +2 bonus to your Evasion against the attack.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Apex Predator",
                    Feature_subclass_mastery0_desc: "Before you make an attack roll against your Focus, you "
                        + "can spend a Hope. On a successful attack, you remove a Fear from the "
                        + "GM's Fear pool.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "8": // Rogue - Nightwalker
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Finesse",
                    Feature_subclass_foundation0_name: "Shadow Stepper",
                    Feature_subclass_foundation0_desc: "You can move from shadow to shadow. When you move "
                        + "into an area of darkness or a shadow cast by another creature or "
                        + "object, you can mark a Stress to disappear from where you are and "
                        + "reappear inside another shadow within Far range. When you reappear, you "
                        + "are Cloaked.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Dark Cloud",
                    Feature_subclass_specialization0_desc: "Make a Spellcast Roll (15). On a success, "
                        + " create a temporary dark cloud that covers any area within Close range. "
                        + "Anyone in this cloud can't see outside of it, and anyone outside of it "
                        + "can't see in. You're considered Cloaked from any adversary for whom the "
                        + "cloud blocks line of sight.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Adrenaline",
                    Feature_subclass_specialization1_desc: "While you're Vulnerable, add your level to your "
                        + " damage rolls.",
                    Feature_subclass_specialization1_used_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Fleeting Shadow",
                    Feature_subclass_mastery0_desc: "Gain a permanent +1 bonus to your Evasion. You can use "
                        + "your 'Shadow Stepper' feature to move within Very Far range.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Vanishing Act",
                    Feature_subclass_mastery1_desc: "Mark a Stress to become Cloaked at any time. When "
                        + "Cloaked from this feature, you automatically clear the Restrained "
                        + "condition if you have it. You remain Cloaked in this way until you roll "
                        + "with Fear or until your next rest.",
                    Feature_subclass_mastery1_used_toggle: "hidden"
                }
                break;
            case "9": // Rogue - Syndicate
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Finesse",
                    Feature_subclass_foundation0_name: "Well-Connected",
                    Feature_subclass_foundation0_desc: "When you arrive in a prominent town or environment, "
                        + "you know somebody who calls this place home. Give them a name, note how "
                        + "you think they could be useful, and choose one fact from the following "
                        + "list:\n"
                        + "• They owe me a favor, but they'll be hard to find.\n"
                        + "• They're going to ask for something in exchange.\n"
                        + "• They're always in a great deal of trouble.\n"
                        + "• We used to be together. It's a long story.\n"
                        + "• We didn't part on great terms.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Contacts Everywhere",
                    Feature_subclass_specialization0_desc: "Once per session, you can briefly call on a "
                        + "shady contact. Choose one of the following benefits and describe what "
                        + "brought them here to help you in this moment:\n"
                        + "• They provide 1 handful of gold, a unique tool, or a mundane object "
                        + "that the situation requires.\n"
                        + "• On your next action roll, their help provides a +3 bonus to the "
                        + "result of your Hope or Fear Die.\n"
                        + "• The next time you deal damage, they snipe from the shadows, adding "
                        + "2d8 to your damage roll.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "session",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Reliable Backup",
                    Feature_subclass_mastery0_desc: "You can use your 'Contacts Everywhere' feature three "
                        + "times per session. The following options are added to the list of "
                        + "benefits you can choose from when you use that feature:\n"
                        + "• When you mark 1 or more Hit Points, they can rush out to shield you, "
                        + "reducing the Hit Points marked by 1.\n"
                        + "• When you make a Presence Roll in conversation, they back you up. You "
                        + "can roll a d20 as your Hope Die.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "10": // Seraph - Divine Wielder
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Strength",
                    Feature_subclass_foundation0_name: "Spirit Weapon",
                    Feature_subclass_foundation0_desc: "When you have an equipped weapon with a range of "
                        + "Melee or Very Close, it can fly from your hand to attack an adversary "
                        + "within Close range and then return to you. You can mark a Stress to "
                        + "target an additional adversary within range with the same attack roll.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Sparing Touch",
                    Feature_subclass_foundation1_desc: "Once per long rest, touch a creature and clear 2 "
                        + "Hit Points or 2 Stress from them.",
                    Feature_subclass_foundation1_used_toggle: "inactive",
                    Feature_subclass_foundation1_used_refresh: "long",
                    Feature_subclass_specialization0_name: "Devout",
                    Feature_subclass_specialization0_desc: "When you roll your Prayer Dice, you can roll an "
                        + " additional die and discard the lowest result. Additionally, you can "
                        + "use your 'Sparing Touch' feature twice instead of once per long rest.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "long",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Sacred Resonance",
                    Feature_subclass_mastery0_desc: "When you roll damage for your 'Spirit Weapon' feature, "
                        + "if any of the die results match, double the value of each matching die. "
                        + "For example, if you roll two 5s, they count as two 10s.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "11": // Seraph - Winged Sentinel
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Strength",
                    Feature_subclass_foundation0_name: "Wings of Light",
                    Feature_subclass_foundation0_desc: "You can fly. While flying, you can do the "
                        + "following:\n"
                        + "• Mark a Stress to pick up and carry another willing creature "
                        + "approximately your size or smaller.\n"
                        + "• Spend a Hope to deal an extra 1d8 damage on a successful attack.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Ethereal Visage",
                    Feature_subclass_specialization0_desc: "Your supernatural visage strikes awe and fear. "
                        + "While flying, you have advantage on Presence Rolls. When you succeed "
                        + "with Hope on a Presence Roll, you can remove a Fear from the GM's Fear "
                        + "pool instead of gaining Hope.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Ascendant",
                    Feature_subclass_mastery0_desc: "Gain a permanent +4 bonus to your Severe damage "
                        + "threshold.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Power of the Gods",
                    Feature_subclass_mastery1_desc: "While flying, you deal an extra 1d12 damage instead "
                        + "of 1d8 from your 'Wings of Light' feature.",
                    Feature_subclass_mastery1_used_toggle: "hidden"
                }
                break;
            case "12": // Sorcerer - Elemental Origin
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_subclass_foundation0_name: "Elementalist",
                    Feature_subclass_foundation0_desc: "Choose one of the following elements at character "
                        + "creation: air, earth, fire, lightning, water. You can shape this "
                        + "element into harmless effects. Additionally, spend a Hope and describe "
                        + "how your control over this element helps an action roll you're about to "
                        + "make, then either gain a +2 bonus to the roll or a +3 bonus to the "
                        + "roll's damage.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Natural Evasion",
                    Feature_subclass_specialization0_desc: "You can call forth your element to protect you "
                        + "from harm. When an attack roll against you succeeds, you can mark a "
                        + "Stress and describe how you use your element to defend you. When you "
                        + "do, roll a d6 and add its result to your Evasion against the attack.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Transcendence",
                    Feature_subclass_mastery0_desc: "Once per long rest, you can transform into a physical "
                        + "manifestation of your element. When you do, describe your "
                        + "transformation and choose two of the following benefits to gain until "
                        + "your next rest:\n"
                        + "• +4 bonus to your Severe threshold\n"
                        + "• +1 bonus to a character trait of your choice\n"
                        + "• +1 bonus to your Proficiency\n"
                        + "• +2 bonus to your Evasion",
                    Feature_subclass_mastery0_used_toggle: "inactive",
                    Feature_subclass_mastery0_used_refresh: "long",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "13": // Sorcerer - Primal Origin
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_subclass_foundation0_name: "Manipulate Magic",
                    Feature_subclass_foundation0_desc: "Your primal origin allows you to modify the essence "
                        + "of magic itself. After you cast a spell or make an attack using a "
                        + "weapon that deals magic damage, you can mark a Stress to do one of the "
                        + "following:\n"
                        + "• Extend the spell or attack's reach by one range\n"
                        + "• Gain a +2 bonus to the action roll's result\n"
                        + "• Double a damage die of your choice\n"
                        + "• Hit an additional target within range",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Enchanted Aid",
                    Feature_subclass_specialization0_desc: "You can enhance the magic of others with your "
                        + "essence. When you Help an Ally with a Spellcast Roll, you can roll a d8 "
                        + "as your advantage die. Once per long rest, after an ally has made a "
                        + "Spellcast Roll with your help, you can swap the results of their "
                        + "Duality Dice.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "long",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Arcane Charge",
                    Feature_subclass_mastery0_desc: "You can gather magical energy to enhance your "
                        + "capabilities. When you take magic damage, you become Charged. "
                        + "Alternatively, you can spend 2 Hope to become Charged. When you "
                        + "successfully make an attack that deals magic damage while Charged, you "
                        + "can clear your Charge to either gain a +10 bonus to the damage roll or "
                        + "gain a +3 bonus to the Difficulty of a reaction roll the spell causes "
                        + "the target to make. You stop being Charged at your next long rest.",
                    Feature_subclass_mastery0_used_toggle: "inactive",
                    Feature_subclass_mastery0_used_refresh: "long",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "14": // Warrior - Call of the Brave
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_subclass_foundation0_name: "Courage",
                    Feature_subclass_foundation0_desc: "When you fail a roll with Fear, you gain a Hope.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Battle Ritual",
                    Feature_subclass_foundation1_desc: "Once per long rest, before you attempt something "
                        + "incredibly dangerous or face off against a foe who clearly outmatches "
                        + "you, describe what ritual you perform or preparations you make. When "
                        + "you do, clear 2 Stress and gain 2 Hope.",
                    Feature_subclass_foundation1_used_toggle: "inactive",
                    Feature_subclass_foundation1_used_refresh: "long",
                    Feature_subclass_specialization0_name: "Rise to the Challenge",
                    Feature_subclass_specialization0_desc: "You are vigilant in the face of mounting "
                        + "danger. While you have 2 or fewer Hit Points unmarked, you can roll a "
                        + "d20 as your Hope Die.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Sacred Resonance",
                    Feature_subclass_mastery0_desc: "Your unwavering bravery is a rallying point for your "
                        + "allies. You can initiate a Tag Team Roll one additional time per "
                        + "session. Additionally, when an ally initiates a Tag Team Roll with you, "
                        + "they only need to spend 2 Hope to do so.",
                    Feature_subclass_mastery0_used_toggle: "inactive",
                    Feature_subclass_mastery0_used_refresh: "session",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "15": // Warrior - Call of the Slayer
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_subclass_foundation0_name: "Slayer",
                    Feature_subclass_foundation0_desc: "You gain a pool of dice called Slayer Dice. On a "
                        + "roll with Hope, you can place a d6 on this card instead of gaining a "
                        + "Hope, adding the die to the pool. You can store a number of Slayer Dice "
                        + "equal to your Proficiency. When you make an attack roll or damage roll, "
                        + "you can spend any number of these Slayer Dice, rolling them and adding "
                        + " their result to the roll. At the end of each session, clear any "
                        + " unspent Slayer Dice on this card and gain a Hope per die cleared.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "shown",
                    Feature_subclass_foundation1_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Weapon Specialist",
                    Feature_subclass_specialization0_desc: "You can wield multiple weapons with dangerous "
                        + "ease. When you succeed on an attack, you can spend a Hope to add one of "
                        + "the damage dice from your secondary weapon to the damage roll. "
                        + "Additionally, once per long rest when you roll your Slayer Dice, reroll "
                        + "any 1s.",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "long",
                    Feature_subclass_specialization1_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Martial Preparation",
                    Feature_subclass_mastery0_desc: "You're an inspirational warrior to all who travel with "
                        + "you. Your party gains access to the Martial Preparation downtime move. "
                        + "To use this move during a rest, describe how you instruct and train "
                        + "with your party. You and each ally who chooses this downtime move gain "
                        + "a d6 Slayer Die. A PC with a Slayer Die can spend it to roll the die "
                        + "and add the result to an attack or damage roll of their choice.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "hidden"
                }
                break;
            case "16": // Wizard - School of Knowledge
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Knowledge",
                    Feature_subclass_foundation0_name: "Prepared",
                    Feature_subclass_foundation0_desc: "Take an additional domain card of your level or "
                        + " lower from a domain you have access to.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Adept",
                    Feature_subclass_foundation1_desc: " When you Utilize an Experience, you can mark a "
                        + "Stress instead of spending a Hope. If you do, double your Experience "
                        + "modifier for that roll.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Accomplished",
                    Feature_subclass_specialization0_desc: "Take an additional domain card of your level or "
                        + "lower from a domain you have access to.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Perfect Recall",
                    Feature_subclass_specialization1_desc: "Once per rest, when you recall a domain card in "
                        + "your vault, you can reduce its Recall Cost by 1.",
                    Feature_subclass_specialization1_used_toggle: "inactive",
                    Feature_subclass_specialization1_used_refresh: "rest",
                    Feature_subclass_mastery0_name: "Brilliant",
                    Feature_subclass_mastery0_desc: "Take an additional domain card of your level or lower "
                        + "from a domain you have access to.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Honed Expertise",
                    Feature_subclass_mastery1_desc: "When you use an Experience, roll a d6. On a result of "
                        + "5 or higher, you can use it without spending Hope.",
                    Feature_subclass_mastery1_used_toggle: "hidden"
                }
                break;
            case "17": // Wizard - School of War
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "Knowledge",
                    Feature_subclass_foundation0_name: "Battlemage",
                    Feature_subclass_foundation0_desc: "You've focused your studies on becoming an "
                        + "unconquerable force on the battlefield. Gain an additional Hit Point "
                        + "slot.",
                    Feature_subclass_foundation0_used_toggle: "hidden",
                    Feature_subclass_foundation0_tokens_toggle: "hidden",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "Face Your Fear",
                    Feature_subclass_foundation1_desc: "When you succeed with Fear on an attack roll, you "
                        + "deal an extra 1d10 magic damage.",
                    Feature_subclass_foundation1_used_toggle: "hidden",
                    Feature_subclass_specialization0_name: "Conjure Shield",
                    Feature_subclass_specialization0_desc: "You can maintain a protective barrier of magic. "
                        + "While you have at least 2 Hope, you add your Proficiency to your "
                        + "Evasion.",
                    Feature_subclass_specialization0_used_toggle: "hidden",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "Fueled by Fear",
                    Feature_subclass_specialization1_desc: "The extra magic damage from your 'Face Your "
                        + "Fear' feature increases to 2d10.",
                    Feature_subclass_specialization1_used_toggle: "hidden",
                    Feature_subclass_mastery0_name: "Thrive in Chaos",
                    Feature_subclass_mastery0_desc: "When you succeed on an attack, you can mark a Stress "
                        + "after rolling damage to force the target to mark an additional Hit "
                        + "Point.",
                    Feature_subclass_mastery0_used_toggle: "hidden",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "Have No Fear",
                    Feature_subclass_mastery1_desc: "The extra magic damage from your 'Face Your Fear' "
                        + "feature increases to 3d10.",
                    Feature_subclass_mastery1_used_toggle: "hidden"
                }
                break;
            default: // Custom Subclass
                subclassFeatures = {
                    Feature_subclass_spellcast_trait: "",
                    Feature_subclass_foundation0_name: "",
                    Feature_subclass_foundation0_desc: "",
                    Feature_subclass_foundation0_used_toggle: "inactive",
                    Feature_subclass_foundation0_used_refresh: "never",
                    Feature_subclass_foundation0_tokens_toggle: "shown",
                    Feature_subclass_foundation1_toggle: "shown",
                    Feature_subclass_foundation1_name: "",
                    Feature_subclass_foundation1_desc: "",
                    Feature_subclass_foundation1_used_toggle: "inactive",
                    Feature_subclass_foundation1_used_refresh: "never",
                    Feature_subclass_specialization0_name: "",
                    Feature_subclass_specialization0_desc: "",
                    Feature_subclass_specialization0_used_toggle: "inactive",
                    Feature_subclass_specialization0_used_refresh: "never",
                    Feature_subclass_specialization1_toggle: "shown",
                    Feature_subclass_specialization1_name: "",
                    Feature_subclass_specialization1_desc: "",
                    Feature_subclass_specialization1_used_toggle: "inactive",
                    Feature_subclass_specialization1_used_refresh: "never",
                    Feature_subclass_mastery0_name: "",
                    Feature_subclass_mastery0_desc: "",
                    Feature_subclass_mastery0_used_toggle: "inactive",
                    Feature_subclass_mastery0_used_refresh: "never",
                    Feature_subclass_mastery1_toggle: "shown",
                    Feature_subclass_mastery1_name: "",
                    Feature_subclass_mastery1_desc: "",
                    Feature_subclass_mastery1_used_toggle: "inactive",
                    Feature_subclass_mastery1_used_refresh: "never"
                }
                break;
        }
        if (subclassFeatures.Feature_subclass_foundation0_used_toggle === "hidden")
            subclassFeatures["Feature_subclass_foundation0_used_refresh"] = "never";
        if (subclassFeatures.Feature_subclass_foundation1_used_toggle === "hidden" || subclassFeatures.Feature_subclass_foundation1_toggle === "hidden")
            subclassFeatures["Feature_subclass_foundation1_used_refresh"] = "never";
        if (subclassFeatures.Feature_subclass_specialization0_used_toggle === "hidden")
            subclassFeatures["Feature_subclass_specialization0_used_refresh"] = "never";
        if (subclassFeatures.Feature_subclass_specialization1_used_toggle === "hidden" || subclassFeatures.Feature_subclass_specialization1_toggle === "hidden")
            subclassFeatures["Feature_subclass_specialization1_used_refresh"] = "never";
        if (subclassFeatures.Feature_subclass_mastery0_used_toggle === "hidden")
            subclassFeatures["Feature_subclass_mastery0_used_refresh"] = "never";
        if (subclassFeatures.Feature_subclass_mastery1_used_toggle === "hidden" || subclassFeatures.Feature_subclass_mastery1_toggle === "hidden")
            subclassFeatures["Feature_subclass_mastery1_used_refresh"] = "never";
        setAttrs(subclassFeatures);
    }

    /* Populates the number of armor slots equal to the Armor value */
    const populateArmorSlots = function(armor) {
        var armorToggleList = [];
        slotToggles.forEach(slotToggle => {
            if(slotToggle.type === "armor")
                armorToggleList.push(slotToggle.toggle);
        });
        getAttrs(armorToggleList, function(values) {
            const valuesArr = [];
            Object.entries(values).forEach(([key, value]) => {
                valuesArr.push(value);
            });
            const needsToggled = {};
            armorToggleList.forEach((name, i) => {
                if ((i + 1) > armor)
                    needsToggled[name] = "hidden";
                else {
                    valuesArr[i] === "active" ? needsToggled[name] = "active" : needsToggled[name] = "inactive";
                }
            });
            setAttrs(needsToggled);
        });
    }

    /* Populates the number of hp slots equal to the Hp_max value */
    const populateHpSlots = function(hpMax) {
        var hpToggleList = [];
         slotToggles.forEach(slotToggle => {
            if(slotToggle.type === "hp")
                hpToggleList.push(slotToggle.toggle);
        });
        getAttrs(hpToggleList, function(values) {
            const valuesArr = [];
            Object.entries(values).forEach(([key, value]) => {
                valuesArr.push(value);
            });
            const needsToggled = {};
            hpToggleList.forEach((name, i) => {
                if ((i + 1) > hpMax)
                    needsToggled[name] = "hidden";
                else {
                    valuesArr[i] === "active" ? needsToggled[name] = "active" : needsToggled[name] = "inactive";
                }
            });
            setAttrs(needsToggled);
        });
    }

    /* Populates the number of hp slots equal to the Stress_max value */
    const populateStressSlots = function(stressMax) {
        var stressToggleList = [];
         slotToggles.forEach(slotToggle => {
            if(slotToggle.type === "stress")
                stressToggleList.push(slotToggle.toggle);
        });
        getAttrs(stressToggleList, function(values) {
            const valuesArr = [];
            Object.entries(values).forEach(([key, value]) => {
                valuesArr.push(value);
            });
            const needsToggled = {};
            stressToggleList.forEach((name, i) => {
                if ((i + 1) > stressMax)
                    needsToggled[name] = "hidden";
                else {
                    valuesArr[i] === "active" ? needsToggled[name] = "active" : needsToggled[name] = "inactive";
                }
            });
            setAttrs(needsToggled);
        });
    }

    /* Populates the Hit modifier when the Weapon Trait is selected */
    const populateHitModifier = function(toggle, trait) {
        const capitalTrait = trait.charAt(0).toUpperCase() + trait.slice(1);
        getAttrs([capitalTrait], function (values) {
            const hitModifier = `Weapon_${toggle}_hit`;
            setAttrs({
                [hitModifier]: values[capitalTrait]
            });
        });
    }

    /* Populates the first feature of Mixed Ancestry */
    const populateMixedAncestryFirst = function(ancestry) {
        var ancestryFeature = {};
        switch (ancestry) {
            case "clank":
                ancestryFeature = {
                    Feature_ancestry0_name: "Purposeful Design",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Decide who made you and for what purpose. At "
                        + "character creation, choose one of your Experiences that best aligns "
                        + "with this purpose and gain a permanent +1 bonus to it."
                }
                break;
            case "drakona":
                ancestryFeature = {
                    Feature_ancestry0_name: "Scales",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Your scales act as natural protection. When you "
                        + "would take Severe damage, you can mark a Stress to mark 1 fewer Hit "
                        + "Points."
                }
                break;
            case "dwarf":
                ancestryFeature = {
                    Feature_ancestry0_name: "Thick Skin",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you take Minor damage, you can mark 2 Stress "
                        + "instead of marking a Hit Point."
                }
                break;
            case "elf":
                ancestryFeature = {
                    Feature_ancestry0_name: "Quick Reactions",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Mark a Stress to gain advantage on a reaction roll."
                }
                break;
            case "faerie":
                ancestryFeature = {
                    Feature_ancestry0_name: "Luckbender",
                    Feature_ancestry0_used_toggle: "inactive",
                    Feature_ancestry0_used_refresh: "session",
                    Feature_ancestry0_desc: "Once per session, after you or a willing ally within "
                        + "Close range makes an action roll, you can spend 3 Hope to reroll the "
                        + "Duality Dice."
                }
                break;
            case "faun":
                ancestryFeature = {
                    Feature_ancestry0_name: "Caprine Leap",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You can leap anywhere within Close range as though "
                        + "you were using normal movement, allowing you to vault obstacles, jump "
                        + "across gaps, or scale barriers with ease."
                }
                break;
            case "firbolg":
                ancestryFeature = {
                    Feature_ancestry0_name: "Charge",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you succeed on an Agility Roll to move from Far "
                        + "or Very Far range into Melee range with one or more targets, you can "
                        + "mark a Stress to deal 1d12 physical damage to all targets within Melee "
                        + "range."
                }
                break;
            case "fungril":
                ancestryFeature = {
                    Feature_ancestry0_name: "Fungril Network",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Make an Instinct Roll (12) to use your mycelial "
                        + "array to speak with others of your ancestry. On a success, you can "
                        + "communicate across any distance."
                }
                break;
            case "galapa":
                ancestryFeature = {
                    Feature_ancestry0_name: "Shell",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain a bonus to your damage thresholds equal to your "
                        + "Proficiency."
                }
                break;
            case "giant":
                ancestryFeature = {
                    Feature_ancestry0_name: "Endurance",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain an additional Hit Point slot at character "
                        + "creation."
                }
                break;
            case "goblin":
                ancestryFeature = {
                    Feature_ancestry0_name: "Surefooted",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You ignore disadvantage on Agility Rolls."
                }
                break;
            case "halfling":
                ancestryFeature = {
                    Feature_ancestry0_name: "Luckbringer",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "At the start of each session, everyone in your party "
                        + "gains a Hope."
                }
                break;
            case "human":
                ancestryFeature = {
                    Feature_ancestry0_name: "High Stamina",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "Gain an additional Stress slot at character creation."
                }
                break;
            case "infernis":
                ancestryFeature = {
                    Feature_ancestry0_name: "Fearless",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you roll with Fear, you can mark 2 Stress to "
                        + "change it into a roll with Hope instead."
                }
                break;
            case "katari":
                ancestryFeature = {
                    Feature_ancestry0_name: "Feline Instincts",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you make an Agility Roll, you can spend 2 Hope "
                        + "to reroll your Hope Die."
                }
                break;
            case "orc":
                ancestryFeature = {
                    Feature_ancestry0_name: "Sturdy",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "When you have 1 Hit Point remaining, attacks against "
                        + "you have disadvantage."
                }
                break;
            case "ribbet":
                ancestryFeature = {
                    Feature_ancestry0_name: "Amphibious",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You can breathe and move naturally underwater."
                }
                break;
            case "simiah":
                ancestryFeature = {
                    Feature_ancestry0_name: "Natural Climber",
                    Feature_ancestry0_used_toggle: "hidden",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: "You have advantage on Agility Rolls that involve "
                        + "balancing and climbing."
                }
                break;
            default:
                ancestryFeature = {
                    Feature_ancestry0_name: "",
                    Feature_ancestry0_used_toggle: "inactive",
                    Feature_ancestry0_used_refresh: "never",
                    Feature_ancestry0_desc: ""
                }
        }
        setAttrs(ancestryFeature);
    }

    /* Populates the second feature of Mixed Ancestry */
    const populateMixedAncestrySecond = function(ancestry) {
        var ancestryFeature = {};
        switch (ancestry) {
            case "clank":
                ancestryFeature = {
                    Feature_ancestry1_name: "Efficient",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you take a short rest, you can choose a long "
                        + "rest move instead of a short rest move."
                }
                break;
            case "drakona":
                ancestryFeature = {
                    Feature_ancestry1_name: "Elemental Breath",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Choose an element for your breath (such as "
                        + "electricity, fire, or ice). You can use this breath against a target or "
                        + "group of targets within Very Close range, treating it as an Instinct "
                        + "weapon that deals d8 magic damage using your Proficiency."
                }
                break;
            case "dwarf":
                ancestryFeature = {
                    Feature_ancestry1_name: "Increased Fortitude",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Spend 3 Hope to halve incoming physical damage."
                }
                break;
            case "elf":
                ancestryFeature = {
                    Feature_ancestry1_name: "Celestial Trance",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "During a rest, you can drop into a trance to choose "
                        + "an additional downtime move."
                }
                break;
            case "faerie":
                ancestryFeature = {
                    Feature_ancestry1_name: "Wings",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You can fly. While flying, you can mark a Stress "
                        + "after an adversary makes an attack against you to gain a +2 bonus to "
                        + "your Evasion against that attack."
                }
                break;
            case "faun":
                ancestryFeature = {
                    Feature_ancestry1_name: "Kick",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you succeed on an attack against a target "
                        + "within Melee range, you can mark a Stress to kick yourself off them, "
                        + "dealing an extra 2d6 damage and knocking back either yourself or the "
                        + "target to Very Close range."
                }
                break;
            case "firbolg":
                ancestryFeature = {
                    Feature_ancestry1_name: "Unshakable",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you would mark a Stress, roll a d6. On a result "
                        + "of 6, don't mark it."
                }
                break;
            case "fungril":
                ancestryFeature = {
                    Feature_ancestry1_name: "Death Connection",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "While touching a corpse that died recently, you can "
                        + "mark a Stress to extract one memory from the corpse related to a "
                        + "specific emotion or sensation of your choice."
                }
                break;
            case "galapa":
                ancestryFeature = {
                    Feature_ancestry1_name: "Retract",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Mark a Stress to retract into your shell. While in "
                        + "your shell, you have resistance to physical damage, you have "
                        + " disadvantage on action rolls, and you can't move."
                }
                break;
            case "giant":
                ancestryFeature = {
                    Feature_ancestry1_name: "Reach",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Treat any weapon, ability, spell, or other feature "
                        + "that has a Melee range as though it has a Very Close range instead."
                }
                break;
            case "goblin":
                ancestryFeature = {
                    Feature_ancestry1_name: "Danger Sense",
                    Feature_ancestry1_used_toggle: "inactive",
                    Feature_ancestry1_used_refresh: "rest",
                    Feature_ancestry1_desc: "Once per rest, mark a Stress to force an adversary "
                        + "to reroll an attack against you or an ally within Very Close range."
                }
                break;
            case "halfling":
                ancestryFeature = {
                    Feature_ancestry1_name: "Internal Compass",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you roll a 1 on your Hope Die, you can reroll "
                        + "it."
                }
                break;
            case "human":
                ancestryFeature = {
                    Feature_ancestry1_name: "Adaptability",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you fail a roll that utilized one of your "
                        + "Experiences, you can mark a Stress to reroll."
                }
                break;
            case "infernis":
                ancestryFeature = {
                    Feature_ancestry1_name: "Dread Visage",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You have advantage on rolls to intimidate hostile "
                        + "creatures."
                }
                break;
            case "katari":
                ancestryFeature = {
                    Feature_ancestry1_name: "Retracting Claws",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Make an Agility Roll to scratch a target within "
                        + "Melee range. On a success, they become temporarily Vulnerable."
                }
                break;
            case "orc":
                ancestryFeature = {
                    Feature_ancestry1_name: "Tusks",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "When you succeed on an attack against a target "
                        + "within Melee range, you can spend a Hope to gore the target with your "
                        + "tusks, dealing an extra 1d6 damage."
                }
                break;
            case "ribbet":
                ancestryFeature = {
                    Feature_ancestry1_name: "Long Tongue",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "You can use your long tongue to grab onto things "
                        + "within Close range. Mark a Stress to use your tongue as a Finesse Close "
                        + "weapon that deals d12 physical damage using your Proficiency."
                }
                break;
            case "simiah":
                ancestryFeature = {
                    Feature_ancestry1_name: "Nimble",
                    Feature_ancestry1_used_toggle: "hidden",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: "Gain a permanent +1 bonus to your Evasion at "
                        + "character creation."
                }
                break;
            default:
                ancestryFeature = {
                    Feature_ancestry1_name: "",
                    Feature_ancestry1_used_toggle: "inactive",
                    Feature_ancestry1_used_refresh: "never",
                    Feature_ancestry1_desc: ""
                }
        }
        setAttrs(ancestryFeature);
    }

    const populateMulticlass = function(multiclass) {
        var multiclassFeatures = {};
        switch (multiclass) {
            case "0": // Bard - Troubadour
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Presence",
                    Feature_multiclass_foundation0_name: "Gifted Performer",
                    Feature_multiclass_foundation0_desc: "You can play three different types of songs, once "
                        + "each per long rest; describe how you perform for others to gain the "
                        + "listed benefit:\n"
                        + "• Relaxing Song: You and all allies within Close range clear a Hit "
                        + "Point.\n"
                        + "• Epic Song: Make a target within Close range temporarily Vulnerable.\n"
                        + "• Heartbreaking Song: You and all allies within Close range gain a "
                        + "Hope.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Maestro",
                    Feature_multiclass_specialization0_desc: "Your rallying songs steel the courage of those "
                        + "who listen. When you give a Rally Die to an ally, they can gain a Hope "
                        + "or clear a Stress.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "1": // Bard - Wordsmith
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Presence",
                    Feature_multiclass_foundation0_name: "Rousing Speech",
                    Feature_multiclass_foundation0_desc: "Once per long rest, you can give a heartfelt, "
                        + "inspiring speech. All allies within Far range clear 2 Stress.",
                    Feature_multiclass_foundation0_used_toggle: "inactive",
                    Feature_multiclass_foundation0_used_refresh: "long",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Heart of a Poet",
                    Feature_multiclass_foundation1_desc: "After you make an action roll to impress, persuade, "
                        + "or offend someone, you can spend a Hope to add a d4 to the roll.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Eloquent",
                    Feature_multiclass_specialization0_desc: "Your moving words boost morale. Once per "
                        + "session, when you encourage an ally, you can do one of the following:\n"
                        + "• Allow them to find a mundane object or tool they need.\n"
                        + "• Help an Ally without spending Hope.\n"
                        + "• Give them an additional downtime move during their next rest.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "session",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "2": // Druid - Warden of the Elements
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_multiclass_foundation0_name: "Elemental Incarnation",
                    Feature_multiclass_foundation0_desc: "Mark a Stress to Channel one of the following "
                        + "elements until you take Severe damage or until your next rest:\n"
                        + "• Fire: When an adversary within Melee range deals damage to you, they "
                        + "take 1d10 magic damage.\n"
                        + "• Earth: Gain a bonus to your damage thresholds equal to your "
                        + "Proficiency.\n"
                        + "• Water: When you deal damage to an adversary within Melee range, all "
                        + "other adversaries within Very Close range must mark a Stress.\n"
                        + "• Air: You can hover, gaining advantage on Agility Rolls.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Elemental Aura",
                    Feature_multiclass_specialization0_desc: "Once per rest while Channeling, you can assume "
                        + "an aura matching your element. The aura affects targets within Close "
                        + "range until your Channeling ends.\n"
                        + "• Fire: When an adversary marks 1 or more Hit Points, they must also "
                        + "mark a Stress.\n"
                        + "• Earth: Your allies gain a +1 bonus to Strength.\n"
                        + "• Water: When an adversary deals damage to you, you can mark a Stress "
                        + "to move them anywhere within Very Close range of where they are.\n"
                        + "• Air: When you or an ally takes damage from an attack beyond Melee "
                        + "range, reduce the damage by 1d8.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "rest",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "3": // Druid - Warden of Renewal
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_multiclass_foundation0_name: "Clarity of Nature",
                    Feature_multiclass_foundation0_desc: "Once per long rest, you can create a space of "
                        + "natural serenity within Close range. When you spend a few minutes "
                        + "resting within the space, clear Stress equal to your Instinct, "
                        + "distributed as you choose between you and your allies.",
                    Feature_multiclass_foundation0_used_toggle: "inactive",
                    Feature_multiclass_foundation0_used_refresh: "long",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Regeneration",
                    Feature_multiclass_foundation1_desc: "Touch a creature and spend 3 Hope. That creature "
                        + "clears 1d4 Hit Points.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Regenerative Reach",
                    Feature_multiclass_specialization0_desc: "You can target creatures within Very Close "
                        + "range with your 'Regeneration' feature.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Warden's Protection",
                    Feature_multiclass_specialization1_desc: "Once per long rest, spend 2 Hope to clear 2 Hit "
                        + "Points on 1d4 allies within Close range.",
                    Feature_multiclass_specialization1_used_toggle: "inactive",
                    Feature_multiclass_specialization1_used_refresh: "long"
                }
                break;
            case "4": // Guardian - Stalwart
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_multiclass_foundation0_name: "Unwavering",
                    Feature_multiclass_foundation0_desc: "Gain a permanent +1 bonus to your damage thresholds.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Iron Will",
                    Feature_multiclass_foundation1_desc: "When you take physical damage, you can mark an "
                        + "additional Armor Slot to reduce the severity.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Unrelenting",
                    Feature_multiclass_specialization0_desc: "Gain a permanent +2 bonus to your damage "
                        + "thresholds.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Partners-in-Arms",
                    Feature_multiclass_specialization1_desc: "When an ally within Very Close range takes "
                        + "damage, you can mark an Armor Slot to reduce the severity by one "
                        + "threshold.",
                    Feature_multiclass_specialization1_used_toggle: "hidden"
                }
                break;
            case "5": // Guardian - Vengeance
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_multiclass_foundation0_name: "At Ease",
                    Feature_multiclass_foundation0_desc: "Gain an additional stress slot.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Revenge",
                    Feature_multiclass_foundation1_desc: "When an adversary within Melee range succeeds on an "
                        + "attack against you, you can mark 2 Stress to force the attacker to mark "
                        + "a Hit Point.",
                    Feature_multiclass_specialization0_name: "Act of Reprisal",
                    Feature_multiclass_specialization0_desc: "When an adversary damages an ally within Melee "
                        + "range, you gain a +1 bonus to your Proficiency for the next successful "
                        + "attack you make against that adversary.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "6": // Ranger - Beastbound
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Agility",
                    Feature_multiclass_foundation0_name: "Companion",
                    Feature_multiclass_foundation0_desc: "You have an animal companion of your choice (at the "
                        + "GM's discretion). They stay by your side unless you tell them "
                        + "otherwise. Take the Ranger Companion sheet. When you level up your "
                        + " character, choose a level-up option for your companion from this sheet "
                        + "as well.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Expert Training",
                    Feature_multiclass_specialization0_desc: "Choose an additional level-up option for your "
                        + "companion.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Battle-Bonded",
                    Feature_multiclass_specialization1_desc: "When an adversary attacks you while they're "
                        + "within your companion's Melee range, you gain a +2 bonus to your "
                        + "Evasion against the attack.",
                    Feature_multiclass_specialization1_used_toggle: "hidden"
                }
                break;
            case "7": // Ranger - Wayfinder
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Agility",
                    Feature_multiclass_foundation0_name: "Ruthless Predator",
                    Feature_multiclass_foundation0_desc: "When you make a damage roll, you can mark a Stress "
                        + "to gain a +1 bonus to your Proficiency. Additionally, when you deal "
                        + "Severe damage to an adversary, they must mark a Stress.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Path Forward",
                    Feature_multiclass_foundation1_desc: "When you're traveling to a place you've previously "
                        + "visited or you carry an object that has been at the location before, "
                        + "you can identify the shortest, most direct path to your destination.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Elusive Predator",
                    Feature_multiclass_specialization0_desc: "When your Focus makes an attack against you, "
                        + "you gain a +2 bonus to your Evasion against the attack.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "8": // Rogue - Nightwalker
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Finesse",
                    Feature_multiclass_foundation0_name: "Shadow Stepper",
                    Feature_multiclass_foundation0_desc: "You can move from shadow to shadow. When you move "
                        + "into an area of darkness or a shadow cast by another creature or "
                        + "object, you can mark a Stress to disappear from where you are and "
                        + "reappear inside another shadow within Far range. When you reappear, you "
                        + "are Cloaked.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Dark Cloud",
                    Feature_multiclass_specialization0_desc: "Make a Spellcast Roll (15). On a success, "
                        + " create a temporary dark cloud that covers any area within Close range. "
                        + "Anyone in this cloud can't see outside of it, and anyone outside of it "
                        + "can't see in. You're considered Cloaked from any adversary for whom the "
                        + "cloud blocks line of sight.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Adrenaline",
                    Feature_multiclass_specialization1_desc: "While you're Vulnerable, add your level to your "
                        + " damage rolls.",
                    Feature_multiclass_specialization1_used_toggle: "hidden"
                }
                break;
            case "9": // Rogue - Syndicate
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Finesse",
                    Feature_multiclass_foundation0_name: "Well-Connected",
                    Feature_multiclass_foundation0_desc: "When you arrive in a prominent town or environment, "
                        + "you know somebody who calls this place home. Give them a name, note how "
                        + "you think they could be useful, and choose one fact from the following "
                        + "list:\n"
                        + "• They owe me a favor, but they'll be hard to find.\n"
                        + "• They're going to ask for something in exchange.\n"
                        + "• They're always in a great deal of trouble.\n"
                        + "• We used to be together. It's a long story.\n"
                        + "• We didn't part on great terms.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Contacts Everywhere",
                    Feature_multiclass_specialization0_desc: "Once per session, you can briefly call on a "
                        + "shady contact. Choose one of the following benefits and describe what "
                        + "brought them here to help you in this moment:\n"
                        + "• They provide 1 handful of gold, a unique tool, or a mundane object "
                        + "that the situation requires.\n"
                        + "• On your next action roll, their help provides a +3 bonus to the "
                        + "result of your Hope or Fear Die.\n"
                        + "• The next time you deal damage, they snipe from the shadows, adding "
                        + "2d8 to your damage roll.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "session",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "10": // Seraph - Divine Wielder
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Strength",
                    Feature_multiclass_foundation0_name: "Spirit Weapon",
                    Feature_multiclass_foundation0_desc: "When you have an equipped weapon with a range of "
                        + "Melee or Very Close, it can fly from your hand to attack an adversary "
                        + "within Close range and then return to you. You can mark a Stress to "
                        + "target an additional adversary within range with the same attack roll.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Sparing Touch",
                    Feature_multiclass_foundation1_desc: "Once per long rest, touch a creature and clear 2 "
                        + "Hit Points or 2 Stress from them.",
                    Feature_multiclass_foundation1_used_toggle: "inactive",
                    Feature_multiclass_foundation1_used_refresh: "long",
                    Feature_multiclass_specialization0_name: "Devout",
                    Feature_multiclass_specialization0_desc: "When you roll your Prayer Dice, you can roll an "
                        + " additional die and discard the lowest result. Additionally, you can "
                        + "use your 'Sparing Touch' feature twice instead of once per long rest.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "long",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "11": // Seraph - Winged Sentinel
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Strength",
                    Feature_multiclass_foundation0_name: "Wings of Light",
                    Feature_multiclass_foundation0_desc: "You can fly. While flying, you can do the "
                        + "following:\n"
                        + "• Mark a Stress to pick up and carry another willing creature "
                        + "approximately your size or smaller.\n"
                        + "• Spend a Hope to deal an extra 1d8 damage on a successful attack.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Ethereal Visage",
                    Feature_multiclass_specialization0_desc: "Your supernatural visage strikes awe and fear. "
                        + "While flying, you have advantage on Presence Rolls. When you succeed "
                        + "with Hope on a Presence Roll, you can remove a Fear from the GM's Fear "
                        + "pool instead of gaining Hope.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "12": // Sorcerer - Elemental Origin
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_multiclass_foundation0_name: "Elementalist",
                    Feature_multiclass_foundation0_desc: "Choose one of the following elements at character "
                        + "creation: air, earth, fire, lightning, water. You can shape this "
                        + "element into harmless effects. Additionally, spend a Hope and describe "
                        + "how your control over this element helps an action roll you're about to "
                        + "make, then either gain a +2 bonus to the roll or a +3 bonus to the "
                        + "roll's damage.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Natural Evasion",
                    Feature_multiclass_specialization0_desc: "You can call forth your element to protect you "
                        + "from harm. When an attack roll against you succeeds, you can mark a "
                        + "Stress and describe how you use your element to defend you. When you "
                        + "do, roll a d6 and add its result to your Evasion against the attack.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "13": // Sorcerer - Primal Origin
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Instinct",
                    Feature_multiclass_foundation0_name: "Manipulate Magic",
                    Feature_multiclass_foundation0_desc: "Your primal origin allows you to modify the essence "
                        + "of magic itself. After you cast a spell or make an attack using a "
                        + "weapon that deals magic damage, you can mark a Stress to do one of the "
                        + "following:\n"
                        + "• Extend the spell or attack's reach by one range\n"
                        + "• Gain a +2 bonus to the action roll's result\n"
                        + "• Double a damage die of your choice\n"
                        + "• Hit an additional target within range",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Enchanted Aid",
                    Feature_multiclass_specialization0_desc: "You can enhance the magic of others with your "
                        + "essence. When you Help an Ally with a Spellcast Roll, you can roll a d8 "
                        + "as your advantage die. Once per long rest, after an ally has made a "
                        + "Spellcast Roll with your help, you can swap the results of their "
                        + "Duality Dice.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "long",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "14": // Warrior - Call of the Brave
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_multiclass_foundation0_name: "Courage",
                    Feature_multiclass_foundation0_desc: "When you fail a roll with Fear, you gain a Hope.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Battle Ritual",
                    Feature_multiclass_foundation1_desc: "Once per long rest, before you attempt something "
                        + "incredibly dangerous or face off against a foe who clearly outmatches "
                        + "you, describe what ritual you perform or preparations you make. When "
                        + "you do, clear 2 Stress and gain 2 Hope.",
                    Feature_multiclass_foundation1_used_toggle: "inactive",
                    Feature_multiclass_foundation1_used_refresh: "long",
                    Feature_multiclass_specialization0_name: "Rise to the Challenge",
                    Feature_multiclass_specialization0_desc: "You are vigilant in the face of mounting "
                        + "danger. While you have 2 or fewer Hit Points unmarked, you can roll a "
                        + "d20 as your Hope Die.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "15": // Warrior - Call of the Slayer
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "hidden",
                    Feature_multiclass_foundation0_name: "Slayer",
                    Feature_multiclass_foundation0_desc: "You gain a pool of dice called Slayer Dice. On a "
                        + "roll with Hope, you can place a d6 on this card instead of gaining a "
                        + "Hope, adding the die to the pool. You can store a number of Slayer Dice "
                        + "equal to your Proficiency. When you make an attack roll or damage roll, "
                        + "you can spend any number of these Slayer Dice, rolling them and adding "
                        + " their result to the roll. At the end of each session, clear any "
                        + " unspent Slayer Dice on this card and gain a Hope per die cleared.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "shown",
                    Feature_multiclass_foundation1_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Weapon Specialist",
                    Feature_multiclass_specialization0_desc: "You can wield multiple weapons with dangerous "
                        + "ease. When you succeed on an attack, you can spend a Hope to add one of "
                        + "the damage dice from your secondary weapon to the damage roll. "
                        + "Additionally, once per long rest when you roll your Slayer Dice, reroll "
                        + "any 1s.",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "long",
                    Feature_multiclass_specialization1_toggle: "hidden"
                }
                break;
            case "16": // Wizard - School of Knowledge
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Knowledge",
                    Feature_multiclass_foundation0_name: "Prepared",
                    Feature_multiclass_foundation0_desc: "Take an additional domain card of your level or "
                        + " lower from a domain you have access to.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Adept",
                    Feature_multiclass_foundation1_desc: " When you Utilize an Experience, you can mark a "
                        + "Stress instead of spending a Hope. If you do, double your Experience "
                        + "modifier for that roll.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Accomplished",
                    Feature_multiclass_specialization0_desc: "Take an additional domain card of your level or "
                        + "lower from a domain you have access to.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Perfect Recall",
                    Feature_multiclass_specialization1_desc: "Once per rest, when you recall a domain card in "
                        + "your vault, you can reduce its Recall Cost by 1.",
                    Feature_multiclass_specialization1_used_toggle: "inactive",
                    Feature_multiclass_specialization1_used_refresh: "rest"
                }
                break;
            case "17": // Wizard - School of War
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "Knowledge",
                    Feature_multiclass_foundation0_name: "Battlemage",
                    Feature_multiclass_foundation0_desc: "You've focused your studies on becoming an "
                        + "unconquerable force on the battlefield. Gain an additional Hit Point "
                        + "slot.",
                    Feature_multiclass_foundation0_used_toggle: "hidden",
                    Feature_multiclass_foundation0_tokens_toggle: "hidden",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "Face Your Fear",
                    Feature_multiclass_foundation1_desc: "When you succeed with Fear on an attack roll, you "
                        + "deal an extra 1d10 magic damage.",
                    Feature_multiclass_foundation1_used_toggle: "hidden",
                    Feature_multiclass_specialization0_name: "Conjure Shield",
                    Feature_multiclass_specialization0_desc: "You can maintain a protective barrier of magic. "
                        + "While you have at least 2 Hope, you add your Proficiency to your "
                        + "Evasion.",
                    Feature_multiclass_specialization0_used_toggle: "hidden",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "Fueled by Fear",
                    Feature_multiclass_specialization1_desc: "The extra magic damage from your 'Face Your "
                        + "Fear' feature increases to 2d10.",
                    Feature_multiclass_specialization1_used_toggle: "hidden"
                }
                break;
            default: // Custom Subclass
                multiclassFeatures = {
                    Feature_subclass_spellcast_trait: "",
                    Feature_multiclass_foundation0_name: "",
                    Feature_multiclass_foundation0_desc: "",
                    Feature_multiclass_foundation0_used_toggle: "inactive",
                    Feature_multiclass_foundation0_used_refresh: "never",
                    Feature_multiclass_foundation0_tokens_toggle: "shown",
                    Feature_multiclass_foundation1_toggle: "shown",
                    Feature_multiclass_foundation1_name: "",
                    Feature_multiclass_foundation1_desc: "",
                    Feature_multiclass_foundation1_used_toggle: "inactive",
                    Feature_multiclass_foundation1_used_refresh: "never",
                    Feature_multiclass_specialization0_name: "",
                    Feature_multiclass_specialization0_desc: "",
                    Feature_multiclass_specialization0_used_toggle: "inactive",
                    Feature_multiclass_specialization0_used_refresh: "never",
                    Feature_multiclass_specialization1_toggle: "shown",
                    Feature_multiclass_specialization1_name: "",
                    Feature_multiclass_specialization1_desc: "",
                    Feature_multiclass_specialization1_used_toggle: "inactive",
                    Feature_multiclass_specialization1_used_refresh: "never"
                }
                break;
        }
        if (multiclassFeatures.Feature_multiclass_foundation0_used_toggle === "hidden")
            multiclassFeatures["Feature_multiclass_foundation0_used_refresh"] = "never";
        if (multiclassFeatures.Feature_multiclass_foundation1_used_toggle === "hidden" || multiclassFeatures.Feature_multiclass_foundation1_toggle === "hidden")
            multiclassFeatures["Feature_multiclass_foundation1_used_refresh"] = "never";
        if (multiclassFeatures.Feature_multiclass_specialization0_used_toggle === "hidden")
            multiclassFeatures["Feature_multiclass_specialization0_used_refresh"] = "never";
        if (multiclassFeatures.Feature_multiclass_specialization1_used_toggle === "hidden" || multiclassFeatures.Feature_multiclass_specialization1_toggle === "hidden")
            multiclassFeatures["Feature_multiclass_specialization1_used_refresh"] = "never";
        getAttrs(["Feature_subclass_spellcast_trait"], function(values) {
            const currentSpellcasting = values.Feature_subclass_spellcast_trait;
            const newSpellcasting = multiclassFeatures["Feature_subclass_spellcast_trait"];
            if ((currentSpellcasting !== "" && currentSpellcasting !== "hidden") && (newSpellcasting !== "" && newSpellcasting !== "hidden") && (currentSpellcasting !== newSpellcasting))
                multiclassFeatures["Feature_subclass_spellcast_trait"] = `${currentSpellcasting} OR ${newSpellcasting}`;
            else if ((currentSpellcasting !== "" && currentSpellcasting !== "hidden") && (newSpellcasting === "hidden" || newSpellcasting === ""))
                multiclassFeatures["Feature_subclass_spellcast_trait"] = currentSpellcasting;
            setAttrs(multiclassFeatures);
        });
    }

    on("clicked:short_rest", function(eventInfo) {
        shortRest();
    });
    
    on("clicked:long_rest", function(eventInfo) {
        longRest();
    });

    on("clicked:session_reset", function(eventInfo) {
        sessionReset();
    });

    on("change:ancestry", function(eventInfo) {
        populateAncestryFeatures(eventInfo.newValue);
    });

    on("change:community", function(eventInfo) {
        populateCommunityFeatures(eventInfo.newValue);
    });

    on("change:class", function(eventInfo) {
        populateDefaultResources(eventInfo.newValue);
        populateUniqueFeature(eventInfo.newValue);
        populateClassFeatures(eventInfo.newValue);
    });

    on("change:level", function(eventInfo) {
        setProficiency(eventInfo.newValue);
    });

    on("change:subclass", function(eventInfo) {
        populateSubclassFeatures(eventInfo.newValue);
    });

    on("change:armor", function(eventInfo) {
        populateArmorSlots(eventInfo.newValue);
    });

    on("change:hpmax", function(eventInfo) {
        populateHpSlots(eventInfo.newValue);
    });
    
    on("change:stressmax", function(eventInfo) {
        populateStressSlots(eventInfo.newValue);
    });

    on("change:weapon_primary_trait change:weapon_secondary_trait", function(eventInfo) {
        if (eventInfo.sourceAttribute === "weapon_primary_trait")
            populateHitModifier("primary", eventInfo.newValue);
        else
            populateHitModifier("secondary", eventInfo.newValue);
    });

    on("change:feature_ancestry_mixed0 change:feature_ancestry_mixed1", function (eventInfo) {
        if (eventInfo.sourceAttribute === "feature_ancestry_mixed0")
            populateMixedAncestryFirst(eventInfo.newValue);
        else
            populateMixedAncestrySecond(eventInfo.newValue);
    });

    on("change:feature_subclass_multiclass_toggle", function(eventInfo) {
        if(eventInfo.newValue === "inactive")
            setAttrs({
                multiclass: "",
                silent: true
            });
    });

    on("change:multiclass", function (eventInfo) {
        populateMulticlass(eventInfo.newValue);
    });

    on("clicked:button_domain_hand", function() {
        getSectionIDs("repeating_domain", ids => {
            const fields = [];
            ids.forEach(id => {
                fields.push(`repeating_domain_${id}_domain_effect_vaulted_toggle`);
            });
            getAttrs([...fields], (values) => {
                console.log(values);
                const output = {};
                ids.forEach(id => {
                    values[`repeating_domain_${id}_domain_effect_vaulted_toggle`] === "inactive" ?
                        output[`repeating_domain_${id}_domain_toggle`] = "show":
                        output[`repeating_domain_${id}_domain_toggle`] = "hidden";
                });
                console.log(output);
                setAttrs(output);
            });
        });
    });

    on("clicked:button_domain_all", function() {
        getSectionIDs("repeating_domain", ids => {
            const output = {};
            ids.forEach(id => {
                output[`repeating_domain_${id}_domain_toggle`] = "show";
            });
            setAttrs(output);
        });
    });
</script>